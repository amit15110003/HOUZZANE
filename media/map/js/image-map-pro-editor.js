!function($,window,document,undefined){function Editor(){this.wcpEditorSettings=undefined,this.actionStack=new Array,this.actionIndex=0,this.canvasImage=new Image,this.canvasWidth=0,this.canvasHeight=0,this.canvas=undefined,this.ix=0,this.iy=0,this.x=0,this.y=0,this.dx=0,this.dy=0,this.drawRectWidth=0,this.drawRectHeight=0,this.transformX=0,this.transformY=0,this.transformWidth=0,this.transformHeight=0,this.eventSpotId=undefined,this.redrawEl=undefined,this.redrawSvgEl=undefined,this.redrawPolygonEl=undefined,this.tempControlPoint=undefined,this.tempControlPointLine=undefined,this.tempControlPointIndex=undefined,this.controlPointInsertionPointX=0,this.controlPointInsertionPointY=0,this.translatedPointIndex=0,this.translatedPoint=undefined,this.translatedPointX=0,this.translatedPointY=0,this.polyPoints=new Array,this.startedSelecting=!1,this.startedMoving=!1,this.startedTransforming=!1,this.transformDirection=0,this.startedDrawingSpot=!1,this.startedDrawingRect=!1,this.createdDrawingRect=!1,this.startedDrawingOval=!1,this.createdDrawingOval=!1,this.startedDrawingPoly=!1,this.drawingPoly=!1,this.finishedDrawingPoly=!1,this.mouseDownWhileDrawingPoly=!1,this.startedTranslatingControlPoint=!1,this.translatingControlPoint=!1,this.didDeleteControlPoint=!1,this.shouldDeselectSpot=!1,this.selectedSpot=undefined,this.eventSpot=undefined,this.shapesFormSpotIndex=undefined,this.iconsHTML=undefined}function loadImage(image,cbLoading,cbComplete,cbError){image.complete&&image.naturalWidth!==undefined&&image.naturalHeight!==undefined?cbComplete():(cbLoading(),$(image).on("load",function(){$(image).off("load"),cbComplete()}),$(image).on("error",function(){$(image).off("error"),cbError()}))}function hexToRgb(hex){var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16)}:null}function screenToCanvasSpace(x,y,canvas){return{x:Math.round(10*(x-canvas.offset().left))/10,y:Math.round(10*(y-canvas.offset().top))/10}}function relLocalToRelCanvasSpace(p,localSpace){return{x:localSpace.width*(p.x/100)+localSpace.x,y:localSpace.height*(p.y/100)+localSpace.y}}function relCanvasToRelLocalSpace(p,localSpace){return{x:(p.x-localSpace.x)/localSpace.width*100,y:(p.y-localSpace.y)/localSpace.height*100}}function limitToCanvas(x,y){return x<0&&(x=0),x>100&&(x=100),y<0&&(y=0),y>100&&(y=100),{x:Math.round(10*x)/10,y:Math.round(10*y)/10}}function isPointInsidePolygon(point,vs){for(var x=point.x,y=point.y,inside=!1,i=0,j=vs.length-1;i<vs.length;j=i++){var xi=vs[i][0],yi=vs[i][1],xj=vs[j][0],yj=vs[j][1],intersect=yi>y!=yj>y&&x<(xj-xi)*(y-yi)/(yj-yi)+xi;intersect&&(inside=!inside)}return inside}function distanceFromLineToPoint(lx1,ly1,lx2,ly2,px,py){return Math.abs((ly2-ly1)*px-(lx2-lx1)*py+lx2*ly1-ly2*lx1)/Math.sqrt(Math.pow(ly2-ly1,2)+Math.pow(lx2-lx1,2))}function pointLineSegmentParameter(p2,p0,p1){var x10=p1[0]-p0[0],y10=p1[1]-p0[1],x20=p2[0]-p0[0],y20=p2[1]-p0[1];return(x20*x10+y20*y10)/(x10*x10+y10*y10)}var editor=undefined,settings=undefined,sliderDragging=!1,copiedStyles=undefined,indexOfShapeToDelete=0,preview_settings={id:4333,editor:{previewMode:0,selected_shape:"spot-8364",tool:"poly"},general:{name:"Demo",width:1280,height:776,responsive:1,sticky_tooltips:0,constrain_tooltips:1,image_url:"https://webcraftplugins.com/uploads/image-map-pro/demo.jpg",tooltip_animation:"grow",pageload_animation:"none",fullscreen_tooltips:"none",late_initialization:0},spots:[{id:"spot-8364",type:"spot",x:26,y:19.8,width:44,height:44,actions:{mouseover:"show-tooltip",click:"no-action",link:"#",open_link_in_new_window:1},default_style:{opacity:1,border_radius:50,background_color:"#000000",background_opacity:.4,border_width:0,border_style:"solid",border_color:"#ffffff",border_opacity:1,fill:"#000000",fill_opacity:.4,stroke_color:"#ffffff",stroke_opacity:.75,stroke_width:0,stroke_dasharray:"10 10",stroke_linecap:"round",use_icon:1,icon_type:"library",icon_svg_path:"M409.81,160.113C409.79,71.684,338.136,0,249.725,0C161.276,0,89.583,71.684,89.583,160.113     c0,76.325,119.274,280.238,151.955,334.638c1.72,2.882,4.826,4.641,8.178,4.641c3.351,0,6.468-1.759,8.168-4.631     C290.545,440.361,409.81,236.438,409.81,160.113z M249.716,283.999c-68.303,0-123.915-55.573-123.915-123.895     c0-68.313,55.592-123.895,123.915-123.895s123.876,55.582,123.876,123.895S318.029,283.999,249.716,283.999z",icon_svg_viewbox:"0 0 499.392 499.392",icon_fill:"#000000",icon_url:"",icon_is_pin:1,icon_shadow:0},mouseover_style:{opacity:1,border_radius:50,background_color:"#ffffff",background_opacity:.4,border_width:0,border_style:"solid",border_color:"#ffffff",border_opacity:1,fill:"#ffffff",fill_opacity:.4,stroke_color:"#ffffff",stroke_opacity:.75,stroke_width:0,stroke_dasharray:"10 10",stroke_linecap:"round",icon_fill:"#ffcd00"},tooltip_style:{border_radius:5,padding:20,background_color:"#000000",background_opacity:.9,position:"left",width:300,auto_width:1},tooltip_content:{content_type:"plain-text",plain_text:"Mouseover the building below!",plain_text_color:"#ffffff",squares_json:'{"containers":[{"id":"sq-container-403761","settings":{"elements":[{"settings":{"name":"Paragraph","iconClass":"fa fa-paragraph"}}]}}]}',squares_content:'<div class="squares-container"><div id="sq-element-725001" class="squares-element col-lg-12 " style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; padding-top: 10px; padding-bottom: 10px; padding-left: 10px; padding-right: 10px; float: left; font-family: sans-serif; font-size: 14px; font-weight: normal; font-style: normal; line-height: 22px; color: #ffffff; text-align: left; text-decoration: none; text-transform: none; background-color: rgba(255, 255, 255, 0); opacity: 1; box-shadow: none; border-width: 0px; border-style: none; border-color: rgba(0, 0, 0, 1); border-radius: 0px; "><p id="" style="" class="">Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.</p></div><div class="squares-clear"></div></div>'},points:[],vs:[]},{id:"poly-2893",type:"poly",x:15.75744680851064,y:22.26270172030207,width:22.844376899696048,height:65.97720051389715,actions:{mouseover:"show-tooltip",click:"no-action",link:"#",open_link_in_new_window:1},default_style:{opacity:1,border_radius:50,background_color:"#000000",background_opacity:.4,border_width:0,border_style:"solid",border_color:"#ffffff",border_opacity:1,fill:"#ffcd00",fill_opacity:0,stroke_color:"#ffffff",stroke_opacity:.75,stroke_width:0,stroke_dasharray:"10 10",stroke_linecap:"round",use_icon:0,icon_type:"library",icon_svg_path:"",icon_svg_viewbox:"",icon_fill:"#2196f3",icon_url:"",icon_is_pin:0,icon_shadow:0},mouseover_style:{opacity:1,border_radius:50,background_color:"#ffffff",background_opacity:.4,border_width:0,border_style:"solid",border_color:"#ffffff",border_opacity:1,fill:"#ffcd00",fill_opacity:.5112781954887218,stroke_color:"#ffffff",stroke_opacity:.75,stroke_width:0,stroke_dasharray:"10 10",stroke_linecap:"round",icon_fill:"#000000"},tooltip_style:{border_radius:5,padding:20,background_color:"#000000",background_opacity:.9,position:"top",width:450,auto_width:0},tooltip_content:{content_type:"content-builder",plain_text:"Lorem Ipsum",plain_text_color:"#ffffff",squares_json:'{"containers":[{"id":"sq-container-359931","settings":{"elements":[{"settings":{"name":"Heading","iconClass":"fa fa-header"},"options":{"heading":{"text":"Content Builder for the Tooltips"}}},{"settings":{"name":"Image","iconClass":"fa fa-camera"},"options":{"layout":{"column_span":{"lg":{"class":"col-lg-6"}}}}},{"settings":{"name":"Paragraph","iconClass":"fa fa-paragraph"},"options":{"text":{"text":"Image Map Pro 3.0 comes with a fully featured content builder that allows you to add rich content to your tooltips. Images, video, buttons, responsive grid system - it has it all!"},"layout":{"column_span":{"lg":{"class":"col-lg-6"}}}}},{"settings":{"name":"Button","iconClass":"fa fa-link"},"options":{"button":{"text":"Example Button!","display":"block"}}}]}}]}',squares_content:'<div class="squares-container"><div id="sq-element-273621" class="squares-element col-lg-12 " style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; padding-top: 10px; padding-bottom: 10px; padding-left: 10px; padding-right: 10px; float: left; font-family: sans-serif; font-size: 14px; font-weight: normal; font-style: normal; line-height: 22px; color: #ffffff; text-align: left; text-decoration: none; text-transform: none; background-color: rgba(255, 255, 255, 0); opacity: 1; box-shadow: none; border-width: 0px; border-style: none; border-color: rgba(0, 0, 0, 1); border-radius: 0px; "><h3 id="" style="" class="">Content Builder for the Tooltips</h3></div><div id="sq-element-241571" class="squares-element col-lg-6 " style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; padding-top: 10px; padding-bottom: 10px; padding-left: 10px; padding-right: 10px; float: left; background-color: rgba(255, 255, 255, 0); opacity: 1; box-shadow: none; border-width: 0px; border-style: none; border-color: rgba(0, 0, 0, 1); border-radius: 0px; "><img src="https://webcraftplugins.com/uploads/placeholder_image.png" id="" style="" class=""></div><div id="sq-element-574821" class="squares-element col-lg-6 " style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; padding-top: 10px; padding-bottom: 10px; padding-left: 10px; padding-right: 10px; float: left; font-family: sans-serif; font-size: 14px; font-weight: normal; font-style: normal; line-height: 22px; color: #ffffff; text-align: left; text-decoration: none; text-transform: none; background-color: rgba(255, 255, 255, 0); opacity: 1; box-shadow: none; border-width: 0px; border-style: none; border-color: rgba(0, 0, 0, 1); border-radius: 0px; "><p id="" style="" class="">Image Map Pro 3.0 comes with a fully featured content builder that allows you to add rich content to your tooltips. Images, video, buttons, responsive grid system - it has it all!</p></div><div id="sq-element-33221" class="squares-element col-lg-12 " style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; padding-top: 10px; padding-bottom: 10px; padding-left: 10px; padding-right: 10px; float: left; font-family: sans-serif; font-size: 14px; font-weight: normal; font-style: normal; line-height: 22px; color: #ffffff; text-align: left; text-decoration: none; text-transform: none; background-color: rgba(255, 255, 255, 0); opacity: 1; box-shadow: none; border-width: 0px; border-style: none; border-color: rgba(0, 0, 0, 1); border-radius: 0px; "><div id="" style="" class=""><a href="#" style="display: block; height: 44px; line-height: 44px; background-color: #2196f3; color: #ffffff; border-radius: 10px; padding-left: 20px; padding-right: 20px; "  class="squares-button">Example Button!</a></div></div><div class="squares-clear"></div></div>'},points:[{x:2.8712844939993056,y:100},{x:3.536549668697936,y:95.06062700400813},{x:.8754889699034004,y:95.06062700400813},{x:0,y:47.12265849973005},{x:.7847960076976461,y:23.53692508155694},{x:3.9088248123944527,y:17.15586649440026},{x:12.222274912965194,y:15.76484496015944},{x:15.056281433779493,y:7.219083609526608},{x:19.502913861465178,y:6.533930832820084},{x:19.502913861465178,y:4.254220219285366},{x:26.155565608451525,y:1.9745096057506475},{x:33.47348253013651,y:.8346542989832882},{x:38.79560392772559,y:.4547025300608352},{x:44.78299050001331,y:0},{x:52.766172596396935,y:1.8997588446122655},{x:59.41882434338327,y:.7599035378449062},{x:64.49612815668326,y:2.2028938646528204},{x:70.93855610846484,y:3.267998410281798},{x:70.30788472285052,y:9.951430765378646},{x:85.60898374091914,y:7.900104410746106},{x:100,y:12.231141378913366},{x:99.33473482530137,y:71.50361733081603},{x:94.67787860241093,y:71.1236655618936},{x:94.67787860241093,y:73.02342440650584},{x:74.71992336145188,y:73.02342440650584},{x:74.71992336145188,y:99.62004823107758}],vs:[[210.09118541033433,684.7416413373859],[212.03647416413372,659.4528875379939],[204.25531914893617,659.4528875379939],[201.69531914893616,414.0186018237082],[203.99012564995655,293.2636383750531],[213.12503655683665,260.593698339942],[237.43423174842115,253.4719035012826],[245.72109422492397,209.7190516717325],[258.7234042553191,206.21118541033434],[258.7234042553191,194.53945288753798],[278.17629179331306,182.86772036474164],[299.57446808510633,177.03185410334345],[315.1367781155015,175.08656534954406],[332.64437689969606,172.75856534954406],[355.9878419452888,182.48500911854103],[375.44072948328267,176.64914285714283],[390.2871732522796,184.03700911854102],[409.12534954407295,189.49016413373857],[407.2812158054711,223.70820668693008],[452.0228571428571,213.20576291793313],[494.10334346504555,235.37993920972644],[492.15805471124617,538.8449848024316],[478.54103343465044,536.8996960486323],[478.54103343465044,546.6261398176291],[420.18237082066867,546.6261398176291],[420.18237082066867,682.7963525835867]]},{id:"poly-974",type:"poly",x:41.03343465045592,y:2.50681540438066,width:19.908814589665656,height:84.47967912762823,actions:{mouseover:"no-action",click:"no-action",link:"#",open_link_in_new_window:1},default_style:{opacity:1,border_radius:50,background_color:"#000000",background_opacity:.4,border_width:0,border_style:"solid",border_color:"#ffffff",border_opacity:1,fill:"#ffcd00",fill_opacity:0,stroke_color:"#ffffff",stroke_opacity:.75,stroke_width:0,stroke_dasharray:"10 10",stroke_linecap:"round",use_icon:0,icon_type:"library",icon_svg_path:"",icon_svg_viewbox:"",icon_fill:"#2196f3",icon_url:"",icon_is_pin:0,icon_shadow:0},mouseover_style:{opacity:1,border_radius:50,background_color:"#ffffff",background_opacity:.4,border_width:0,border_style:"solid",border_color:"#ffffff",border_opacity:1,fill:"#ffcd00",fill_opacity:.5112781954887218,stroke_color:"#ffffff",stroke_opacity:.75,stroke_width:0,stroke_dasharray:"10 10",stroke_linecap:"round",icon_fill:"#000000"},tooltip_style:{border_radius:5,padding:20,background_color:"#000000",background_opacity:.9,position:"top",width:300,auto_width:1},tooltip_content:{content_type:"plain-text",plain_text:"Lorem Ipsum",plain_text_color:"#ffffff",squares_json:'{"containers":[{"id":"sq-container-403761","settings":{"elements":[{"settings":{"name":"Paragraph","iconClass":"fa fa-paragraph"}}]}}]}',squares_content:'<div class="squares-container"><div id="sq-element-725001" class="squares-element col-lg-12 " style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; padding-top: 10px; padding-bottom: 10px; padding-left: 10px; padding-right: 10px; float: left; font-family: sans-serif; font-size: 14px; font-weight: normal; font-style: normal; line-height: 22px; color: #ffffff; text-align: left; text-decoration: none; text-transform: none; background-color: rgba(255, 255, 255, 0); opacity: 1; box-shadow: none; border-width: 0px; border-style: none; border-color: rgba(0, 0, 0, 1); border-radius: 0px; "><p id="" style="" class="">Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.</p></div><div class="squares-clear"></div></div>'},points:[{x:3.0534351145038165,y:91.98813056379822},{x:0,y:10.979228486646884},{x:11.450381679389313,y:7.71513353115727},{x:11.450381679389313,y:6.528189910979229},{x:3.0534351145038165,y:3.857566765578635},{x:29.00763358778626,y:0},{x:55.72519083969466,y:5.934718100890208},{x:60.30534351145038,y:5.341246290801187},{x:72.51908396946564,y:8.605341246290802},{x:73.2824427480916,y:9.792284866468842},{x:93.12977099236642,y:14.540059347181009},{x:93.12977099236642,y:28.18991097922849},{x:100,y:30.267062314540063},{x:98.47328244274809,y:100},{x:58.01526717557252,y:100},{x:57.25190839694656,y:91.3946587537092},{x:25.190839694656486,y:91.0979228486647},{x:25.190839694656486,y:89.31750741839762},{x:10.687022900763358,y:89.02077151335311},{x:10.687022900763358,y:90.80118694362018}],vs:[[533.0091185410333,622.4924012158053],[525.2279635258358,91.4285714285714],[554.4072948328267,70.0303951367781],[554.4072948328267,62.24924012158054],[533.0091185410333,44.741641337386014],[599.1489361702127,19.45288753799392],[667.2340425531914,58.358662613981764],[678.9057750759878,54.46808510638297],[710.030395136778,75.86626139817629],[711.9756838905774,83.64741641337383],[762.5531914893617,114.77203647416411],[762.5531914893617,204.25531914893614],[780.0607902735562,217.8723404255319],[776.1702127659574,675.0151975683889],[673.0699088145896,675.0151975683889],[671.1246200607902,618.6018237082064],[589.4224924012158,616.6565349544071],[589.4224924012158,604.9848024316108],[552.4620060790272,603.0395136778113],[552.4620060790272,614.7112462006078]]},{id:"poly-225",type:"poly",x:64.74164133738601,y:16.043618588036225,width:18.84498480243161,height:71.4442390248488,actions:{mouseover:"no-action",click:"no-action",link:"#",open_link_in_new_window:1},default_style:{opacity:1,border_radius:50,background_color:"#000000",background_opacity:.4,border_width:0,border_style:"solid",border_color:"#ffffff",border_opacity:1,fill:"#ffcd00",fill_opacity:0,stroke_color:"#ffffff",stroke_opacity:.75,stroke_width:0,stroke_dasharray:"10 10",stroke_linecap:"round",use_icon:0,icon_type:"library",icon_svg_path:"",icon_svg_viewbox:"",icon_fill:"#2196f3",icon_url:"",icon_is_pin:0,icon_shadow:0},mouseover_style:{opacity:1,border_radius:50,background_color:"#ffffff",background_opacity:.4,border_width:0,border_style:"solid",border_color:"#ffffff",border_opacity:1,fill:"#ffcd00",fill_opacity:.5112781954887218,stroke_color:"#ffffff",stroke_opacity:.75,stroke_width:0,stroke_dasharray:"10 10",stroke_linecap:"round",icon_fill:"#000000"},tooltip_style:{border_radius:5,padding:20,background_color:"#000000",background_opacity:.9,position:"top",width:300,auto_width:1},tooltip_content:{content_type:"plain-text",plain_text:"Lorem Ipsum",plain_text_color:"#ffffff",squares_json:'{"containers":[{"id":"sq-container-403761","settings":{"elements":[{"settings":{"name":"Paragraph","iconClass":"fa fa-paragraph"}}]}}]}',squares_content:'<div class="squares-container"><div id="sq-element-725001" class="squares-element col-lg-12 " style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; padding-top: 10px; padding-bottom: 10px; padding-left: 10px; padding-right: 10px; float: left; font-family: sans-serif; font-size: 14px; font-weight: normal; font-style: normal; line-height: 22px; color: #ffffff; text-align: left; text-decoration: none; text-transform: none; background-color: rgba(255, 255, 255, 0); opacity: 1; box-shadow: none; border-width: 0px; border-style: none; border-color: rgba(0, 0, 0, 1); border-radius: 0px; "><p id="" style="" class="">Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.</p></div><div class="squares-clear"></div></div>'},points:[{x:1.6129032258064515,y:92.28070175438596},{x:0,y:25.6140350877193},{x:2.4193548387096775,y:25.6140350877193},{x:2.4193548387096775,y:12.982456140350877},{x:15.32258064516129,y:11.578947368421053},{x:15.32258064516129,y:5.964912280701754},{x:31.451612903225808,y:4.912280701754386},{x:30.64516129032258,y:2.807017543859649},{x:54.03225806451613,y:1.7543859649122806},{x:54.83870967741935,y:3.1578947368421053},{x:77.41935483870968,y:0},{x:91.12903225806451,y:5.614035087719298},{x:91.93548387096774,y:21.75438596491228},{x:98.38709677419355,y:25.6140350877193},{x:100,y:81.05263157894737},{x:98.38709677419355,y:89.47368421052632},{x:86.29032258064517,y:89.47368421052632},{x:85.48387096774194,y:99.64912280701755},{x:3.225806451612903,y:100}],vs:[[832.5835866261398,636.1094224924011],[828.693009118541,266.5045592705167],[834.5288753799392,266.5045592705167],[834.5288753799392,196.47416413373858],[865.6534954407294,188.69300911854103],[865.6534954407294,157.56838905775075],[904.5592705167173,151.73252279635258],[902.6139817629179,140.06079027355622],[959.0273556231002,134.22492401215806],[960.9726443768997,142.0060790273556],[1015.4407294832827,124.4984802431611],[1048.5106382978722,155.62310030395136],[1050.4559270516718,245.1063829787234],[1066.018237082067,266.5045592705167],[1069.9088145896656,573.8601823708206],[1066.018237082067,620.547112462006],[1036.838905775076,620.547112462006],[1034.8936170212764,676.9604863221883],[836.4741641337386,678.9057750759878]]},{id:"poly-1879",type:"poly",x:88.14589665653494,y:53.14448657286999,width:11.854103343465045,height:35.09541566132924,actions:{mouseover:"no-action",click:"no-action",link:"#",open_link_in_new_window:1},default_style:{opacity:1,border_radius:50,background_color:"#000000",background_opacity:.4,border_width:0,border_style:"solid",border_color:"#ffffff",border_opacity:1,fill:"#ffcd00",fill_opacity:0,stroke_color:"#ffffff",stroke_opacity:.75,stroke_width:0,stroke_dasharray:"10 10",stroke_linecap:"round",use_icon:0,icon_type:"library",icon_svg_path:"",icon_svg_viewbox:"",icon_fill:"#2196f3",icon_url:"",icon_is_pin:0,icon_shadow:0},mouseover_style:{opacity:1,border_radius:50,background_color:"#ffffff",background_opacity:.4,border_width:0,border_style:"solid",border_color:"#ffffff",border_opacity:1,fill:"#ffcd00",fill_opacity:.5112781954887218,stroke_color:"#ffffff",stroke_opacity:.75,stroke_width:0,stroke_dasharray:"10 10",stroke_linecap:"round",icon_fill:"#000000"},tooltip_style:{border_radius:5,padding:20,background_color:"#000000",background_opacity:.9,position:"top",width:300,auto_width:1},tooltip_content:{content_type:"plain-text",plain_text:"Lorem Ipsum",plain_text_color:"#ffffff",squares_json:'{"containers":[{"id":"sq-container-403761","settings":{"elements":[{"settings":{"name":"Paragraph","iconClass":"fa fa-paragraph"}}]}}]}',squares_content:'<div class="squares-container"><div id="sq-element-725001" class="squares-element col-lg-12 " style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; padding-top: 10px; padding-bottom: 10px; padding-left: 10px; padding-right: 10px; float: left; font-family: sans-serif; font-size: 14px; font-weight: normal; font-style: normal; line-height: 22px; color: #ffffff; text-align: left; text-decoration: none; text-transform: none; background-color: rgba(255, 255, 255, 0); opacity: 1; box-shadow: none; border-width: 0px; border-style: none; border-color: rgba(0, 0, 0, 1); border-radius: 0px; "><p id="" style="" class="">Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.</p></div><div class="squares-clear"></div></div>'},points:[{x:5.128205128205128,y:99.28571428571429},{x:3.8461538461538463,y:19.28571428571429},{x:0,y:13.571428571428571},{x:8.974358974358974,y:13.571428571428571},{x:10.256410256410255,y:10},{x:14.102564102564102,y:9.285714285714286},{x:15.384615384615385,y:5.714285714285714},{x:98.71794871794873,y:0},{x:100,y:100}],vs:[[1136.0486322188447,682.7963525835867],[1134.1033434650453,464.9240121580547],[1128.267477203647,449.36170212765956],[1141.8844984802429,449.36170212765956],[1143.8297872340422,439.6352583586626],[1149.6656534954404,437.6899696048632],[1151.6109422492398,427.9635258358662],[1278.0547112462002,412.4012158054711],[1279.9999999999995,684.741641337386]]},{id:"poly-5080",type:"poly",x:3.1914893617021276,y:57.15539121987905,width:12.613981762917934,height:31.08451101432018,actions:{mouseover:"no-action",click:"no-action",link:"#",open_link_in_new_window:1},default_style:{opacity:1,border_radius:50,background_color:"#000000",background_opacity:.4,border_width:0,border_style:"solid",border_color:"#ffffff",border_opacity:1,fill:"#ffcd00",fill_opacity:0,stroke_color:"#ffffff",stroke_opacity:.75,stroke_width:0,stroke_dasharray:"10 10",stroke_linecap:"round",use_icon:0,icon_type:"library",icon_svg_path:"",icon_svg_viewbox:"",icon_fill:"#2196f3",icon_url:"",icon_is_pin:0,icon_shadow:0},mouseover_style:{opacity:1,border_radius:50,background_color:"#ffffff",background_opacity:.4,border_width:0,border_style:"solid",border_color:"#ffffff",border_opacity:1,fill:"#ffcd00",fill_opacity:.5112781954887218,stroke_color:"#ffffff",stroke_opacity:.75,stroke_width:0,stroke_dasharray:"10 10",stroke_linecap:"round",icon_fill:"#000000"},tooltip_style:{border_radius:5,padding:20,background_color:"#000000",background_opacity:.9,position:"top",width:300,auto_width:1},tooltip_content:{content_type:"plain-text",plain_text:"Lorem Ipsum",plain_text_color:"#ffffff",squares_json:'{"containers":[{"id":"sq-container-403761","settings":{"elements":[{"settings":{"name":"Paragraph","iconClass":"fa fa-paragraph"}}]}}]}',squares_content:'<div class="squares-container"><div id="sq-element-725001" class="squares-element col-lg-12 " style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; padding-top: 10px; padding-bottom: 10px; padding-left: 10px; padding-right: 10px; float: left; font-family: sans-serif; font-size: 14px; font-weight: normal; font-style: normal; line-height: 22px; color: #ffffff; text-align: left; text-decoration: none; text-transform: none; background-color: rgba(255, 255, 255, 0); opacity: 1; box-shadow: none; border-width: 0px; border-style: none; border-color: rgba(0, 0, 0, 1); border-radius: 0px; "><p id="" style="" class="">Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.</p></div><div class="squares-clear"></div></div>'},points:[{x:1.2048192771084338,y:100},{x:0,y:92.74193548387096},{x:13.253012048192772,y:90.32258064516128},{x:14.457831325301203,y:87.09677419354838},{x:28.915662650602407,y:87.09677419354838},{x:32.53012048192771,y:50},{x:38.55421686746988,y:41.12903225806452},{x:45.78313253012048,y:41.12903225806452},{x:44.57831325301205,y:20.967741935483872},{x:66.26506024096386,y:15.32258064516129},{x:67.46987951807229,y:2.4193548387096775},{x:83.13253012048193,y:0},{x:98.79518072289156,y:4.838709677419355},{x:100,y:99.19354838709677}],vs:[[42.796352583586625,684.741641337386],[40.85106382978723,667.2340425531914],[62.24924012158054,661.3981762917932],[64.19452887537993,653.6170212765958],[87.53799392097264,653.6170212765958],[93.37386018237082,564.1337386018237],[103.10030395136778,542.7355623100304],[114.77203647416414,542.7355623100304],[112.82674772036475,494.10334346504555],[147.8419452887538,480.48632218844983],[149.7872340425532,449.36170212765956],[175.07598784194528,443.5258358662614],[200.3647416413374,455.1975683890577],[202.31003039513678,682.7963525835866]]},{id:"poly-3579",type:"poly",x:33.586626139817625,y:69.9401497822204,width:7.598784194528875,height:18.55043399241688,actions:{mouseover:"no-action",click:"no-action",link:"#",open_link_in_new_window:1},default_style:{opacity:1,border_radius:50,background_color:"#000000",background_opacity:.4,border_width:0,border_style:"solid",border_color:"#ffffff",border_opacity:1,fill:"#ffcd00",fill_opacity:0,stroke_color:"#ffffff",stroke_opacity:.75,stroke_width:0,stroke_dasharray:"10 10",stroke_linecap:"round",use_icon:0,icon_type:"library",icon_svg_path:"",icon_svg_viewbox:"",icon_fill:"#2196f3",icon_url:"",icon_is_pin:0,icon_shadow:0},mouseover_style:{opacity:1,border_radius:50,background_color:"#ffffff",background_opacity:.4,border_width:0,border_style:"solid",border_color:"#ffffff",border_opacity:1,fill:"#ffcd00",fill_opacity:.5112781954887218,stroke_color:"#ffffff",stroke_opacity:.75,stroke_width:0,stroke_dasharray:"10 10",stroke_linecap:"round",icon_fill:"#000000"},tooltip_style:{border_radius:5,padding:20,background_color:"#000000",background_opacity:.9,position:"top",width:300,auto_width:1},tooltip_content:{content_type:"plain-text",plain_text:"Lorem Ipsum",plain_text_color:"#ffffff",squares_json:'{"containers":[{"id":"sq-container-403761","settings":{"elements":[{"settings":{"name":"Paragraph","iconClass":"fa fa-paragraph"}}]}}]}',squares_content:'<div class="squares-container"><div id="sq-element-725001" class="squares-element col-lg-12 " style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; padding-top: 10px; padding-bottom: 10px; padding-left: 10px; padding-right: 10px; float: left; font-family: sans-serif; font-size: 14px; font-weight: normal; font-style: normal; line-height: 22px; color: #ffffff; text-align: left; text-decoration: none; text-transform: none; background-color: rgba(255, 255, 255, 0); opacity: 1; box-shadow: none; border-width: 0px; border-style: none; border-color: rgba(0, 0, 0, 1); border-radius: 0px; "><p id="" style="" class="">Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.</p></div><div class="squares-clear"></div></div>'},points:[{x:100,y:0},{x:0,y:9.45945945945946},{x:4,y:97.2972972972973},{x:84,y:100},{x:80,y:56.75675675675676},{x:100,y:52.702702702702695}],vs:[[527.1732522796352,542.7355623100303],[429.9088145896656,556.3525835866261],[433.7993920972644,682.7963525835866],[511.61094224924005,686.6869300911853],[507.7203647416413,624.4376899696048],[527.1732522796352,618.6018237082067]]},{id:"poly-919",type:"poly",x:39.66565349544073,y:77.71127753580045,width:12.917933130699089,height:10.277943157960705,actions:{mouseover:"no-action",click:"no-action",link:"#",open_link_in_new_window:1},default_style:{opacity:1,border_radius:50,background_color:"#000000",background_opacity:.4,border_width:0,border_style:"solid",border_color:"#ffffff",border_opacity:1,fill:"#ffcd00",fill_opacity:0,stroke_color:"#ffffff",stroke_opacity:.75,stroke_width:0,stroke_dasharray:"10 10",stroke_linecap:"round",use_icon:0,icon_type:"library",icon_svg_path:"",icon_svg_viewbox:"",icon_fill:"#2196f3",icon_url:"",icon_is_pin:0,icon_shadow:0},mouseover_style:{opacity:1,border_radius:50,background_color:"#ffffff",background_opacity:.4,border_width:0,border_style:"solid",border_color:"#ffffff",border_opacity:1,fill:"#ffcd00",fill_opacity:.5112781954887218,stroke_color:"#ffffff",stroke_opacity:.75,stroke_width:0,stroke_dasharray:"10 10",stroke_linecap:"round",icon_fill:"#000000"},tooltip_style:{border_radius:5,padding:20,background_color:"#000000",background_opacity:.9,position:"top",width:300,auto_width:1},tooltip_content:{content_type:"plain-text",plain_text:"Lorem Ipsum",plain_text_color:"#ffffff",squares_json:'{"containers":[{"id":"sq-container-403761","settings":{"elements":[{"settings":{"name":"Paragraph","iconClass":"fa fa-paragraph"}}]}}]}',squares_content:'<div class="squares-container"><div id="sq-element-725001" class="squares-element col-lg-12 " style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; padding-top: 10px; padding-bottom: 10px; padding-left: 10px; padding-right: 10px; float: left; font-family: sans-serif; font-size: 14px; font-weight: normal; font-style: normal; line-height: 22px; color: #ffffff; text-align: left; text-decoration: none; text-transform: none; background-color: rgba(255, 255, 255, 0); opacity: 1; box-shadow: none; border-width: 0px; border-style: none; border-color: rgba(0, 0, 0, 1); border-radius: 0px; "><p id="" style="" class="">Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.</p></div><div class="squares-clear"></div></div>'},points:[{x:96.47058823529412,y:100},{x:100,y:26.82926829268293},{x:50.588235294117645,y:17.073170731707318},{x:50.588235294117645,y:12.195121951219512},{x:44.70588235294118,y:0},{x:28.235294117647058,y:0},{x:27.058823529411764,y:14.634146341463413},{x:0,y:24.390243902439025},{x:1.1764705882352942,y:97.5609756097561}],vs:[[667.2340425531916,682.7963525835866],[673.0699088145897,624.4376899696048],[591.3677811550152,616.6565349544072],[591.3677811550152,612.7659574468084],[581.6413373860182,603.0395136778114],[554.4072948328268,603.0395136778114],[552.4620060790273,614.7112462006078],[507.72036474164133,622.4924012158053],[509.6656534954407,680.8510638297871]]},{id:"poly-9983",type:"poly",x:60.334346504559264,y:73.95105442922947,width:4.86322188449848,height:14.038166264531696,actions:{mouseover:"no-action",click:"no-action",link:"#",open_link_in_new_window:1},default_style:{opacity:1,border_radius:50,
background_color:"#000000",background_opacity:.4,border_width:0,border_style:"solid",border_color:"#ffffff",border_opacity:1,fill:"#ffcd00",fill_opacity:0,stroke_color:"#ffffff",stroke_opacity:.75,stroke_width:0,stroke_dasharray:"10 10",stroke_linecap:"round",use_icon:0,icon_type:"library",icon_svg_path:"",icon_svg_viewbox:"",icon_fill:"#2196f3",icon_url:"",icon_is_pin:0,icon_shadow:0},mouseover_style:{opacity:1,border_radius:50,background_color:"#ffffff",background_opacity:.4,border_width:0,border_style:"solid",border_color:"#ffffff",border_opacity:1,fill:"#ffcd00",fill_opacity:.5112781954887218,stroke_color:"#ffffff",stroke_opacity:.75,stroke_width:0,stroke_dasharray:"10 10",stroke_linecap:"round",icon_fill:"#000000"},tooltip_style:{border_radius:5,padding:20,background_color:"#000000",background_opacity:.9,position:"top",width:300,auto_width:1},tooltip_content:{content_type:"plain-text",plain_text:"Lorem Ipsum",plain_text_color:"#ffffff",squares_json:'{"containers":[{"id":"sq-container-403761","settings":{"elements":[{"settings":{"name":"Paragraph","iconClass":"fa fa-paragraph"}}]}}]}',squares_content:'<div class="squares-container"><div id="sq-element-725001" class="squares-element col-lg-12 " style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; padding-top: 10px; padding-bottom: 10px; padding-left: 10px; padding-right: 10px; float: left; font-family: sans-serif; font-size: 14px; font-weight: normal; font-style: normal; line-height: 22px; color: #ffffff; text-align: left; text-decoration: none; text-transform: none; background-color: rgba(255, 255, 255, 0); opacity: 1; box-shadow: none; border-width: 0px; border-style: none; border-color: rgba(0, 0, 0, 1); border-radius: 0px; "><p id="" style="" class="">Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.</p></div><div class="squares-clear"></div></div>'},points:[{x:15.625,y:0},{x:84.375,y:0},{x:96.875,y:10.714285714285714},{x:100,y:96.42857142857143},{x:0,y:100},{x:0,y:16.071428571428573}],vs:[[782.0060790273557,573.8601823708207],[824.8024316109422,573.8601823708207],[832.5835866261398,585.531914893617],[834.5288753799392,678.9057750759879],[772.2796352583587,682.7963525835867],[772.2796352583587,591.3677811550152]]},{id:"poly-9416",type:"poly",x:80.69908814589665,y:74.20173596966752,width:8.054711246200611,height:13.78748472409363,actions:{mouseover:"no-action",click:"no-action",link:"#",open_link_in_new_window:1},default_style:{opacity:1,border_radius:50,background_color:"#000000",background_opacity:.4,border_width:0,border_style:"solid",border_color:"#ffffff",border_opacity:1,fill:"#ffcd00",fill_opacity:0,stroke_color:"#ffffff",stroke_opacity:.75,stroke_width:0,stroke_dasharray:"10 10",stroke_linecap:"round",use_icon:0,icon_type:"library",icon_svg_path:"",icon_svg_viewbox:"",icon_fill:"#2196f3",icon_url:"",icon_is_pin:0,icon_shadow:0},mouseover_style:{opacity:1,border_radius:50,background_color:"#ffffff",background_opacity:.4,border_width:0,border_style:"solid",border_color:"#ffffff",border_opacity:1,fill:"#ffcd00",fill_opacity:.5112781954887218,stroke_color:"#ffffff",stroke_opacity:.75,stroke_width:0,stroke_dasharray:"10 10",stroke_linecap:"round",icon_fill:"#000000"},tooltip_style:{border_radius:5,padding:20,background_color:"#000000",background_opacity:.9,position:"top",width:300,auto_width:1},tooltip_content:{content_type:"plain-text",plain_text:"Lorem Ipsum",plain_text_color:"#ffffff",squares_json:'{"containers":[{"id":"sq-container-403761","settings":{"elements":[{"settings":{"name":"Paragraph","iconClass":"fa fa-paragraph"}}]}}]}',squares_content:'<div class="squares-container"><div id="sq-element-725001" class="squares-element col-lg-12 " style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; padding-top: 10px; padding-bottom: 10px; padding-left: 10px; padding-right: 10px; float: left; font-family: sans-serif; font-size: 14px; font-weight: normal; font-style: normal; line-height: 22px; color: #ffffff; text-align: left; text-decoration: none; text-transform: none; background-color: rgba(255, 255, 255, 0); opacity: 1; box-shadow: none; border-width: 0px; border-style: none; border-color: rgba(0, 0, 0, 1); border-radius: 0px; "><p id="" style="" class="">Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.</p></div><div class="squares-clear"></div></div>'},points:[{x:0,y:98.18181818181819},{x:0,y:47.27272727272727},{x:30.188679245282955,y:41.81818181818181},{x:33.962264150943305,y:.029659090909091627},{x:84.90566037735844,y:0},{x:98.11320754716974,y:10.909090909090908},{x:100,y:100}],vs:[[1032.9483282674773,680.8510638297872],[1032.9483282674773,626.3829787234042],[1064.0729483282676,620.547112462006],[1067.9635258358662,575.8372036474163],[1120.48632218845,575.80547112462],[1134.1033434650458,587.4772036474163],[1136.0486322188451,682.7963525835866]]}]},tmp_settings=undefined,default_settings={id:0,editor:{previewMode:0,selected_shape:-1,tool:"spot"},general:{name:"",shortcode:"",width:1050,height:700,responsive:1,sticky_tooltips:0,constrain_tooltips:1,image_url:"https://webcraftplugins.com/uploads/image-map-pro/demo.jpg",tooltip_animation:"grow",pageload_animation:"none",fullscreen_tooltips:"none",late_initialization:0},spots:[]},default_spot_settings={id:"spot-0",type:"spot",x:-1,y:-1,width:44,height:44,actions:{mouseover:"show-tooltip",click:"no-action",link:"#",open_link_in_new_window:1},default_style:{opacity:1,border_radius:50,background_color:"#000000",background_opacity:.4,border_width:0,border_style:"solid",border_color:"#ffffff",border_opacity:1,fill:"#000000",fill_opacity:.4,stroke_color:"#ffffff",stroke_opacity:.75,stroke_width:0,stroke_dasharray:"10 10",stroke_linecap:"round",use_icon:0,icon_type:"library",icon_svg_path:"M409.81,160.113C409.79,71.684,338.136,0,249.725,0C161.276,0,89.583,71.684,89.583,160.113     c0,76.325,119.274,280.238,151.955,334.638c1.72,2.882,4.826,4.641,8.178,4.641c3.351,0,6.468-1.759,8.168-4.631     C290.545,440.361,409.81,236.438,409.81,160.113z M249.716,283.999c-68.303,0-123.915-55.573-123.915-123.895     c0-68.313,55.592-123.895,123.915-123.895s123.876,55.582,123.876,123.895S318.029,283.999,249.716,283.999z",icon_svg_viewbox:"0 0 499.392 499.392",icon_fill:"#000000",icon_url:"",icon_is_pin:0,icon_shadow:0},mouseover_style:{opacity:1,border_radius:50,background_color:"#ffffff",background_opacity:.4,border_width:0,border_style:"solid",border_color:"#ffffff",border_opacity:1,fill:"#ffffff",fill_opacity:.4,stroke_color:"#ffffff",stroke_opacity:.75,stroke_width:0,stroke_dasharray:"10 10",stroke_linecap:"round",icon_fill:"#000000"},tooltip_style:{border_radius:5,padding:20,background_color:"#000000",background_opacity:.9,position:"top",width:300,auto_width:0},tooltip_content:{content_type:"plain-text",plain_text:"Lorem Ipsum",plain_text_color:"#ffffff",squares_json:'{"containers":[{"id":"sq-container-403761","settings":{"elements":[{"settings":{"name":"Paragraph","iconClass":"fa fa-paragraph"}}]}}]}',squares_content:'<div class="squares-container"><div id="sq-element-725001" class="squares-element col-lg-12 " style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; padding-top: 10px; padding-bottom: 10px; padding-left: 10px; padding-right: 10px; float: left; font-family: sans-serif; font-size: 14px; font-weight: normal; font-style: normal; line-height: 22px; color: #ffffff; text-align: left; text-decoration: none; text-transform: none; background-color: rgba(255, 255, 255, 0); opacity: 1; box-shadow: none; border-width: 0px; border-style: none; border-color: rgba(0, 0, 0, 1); border-radius: 0px; "><p id="" style="" class="">Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.</p></div><div class="squares-clear"></div></div>'},points:[],vs:[]};$.imageMapProDefaultSettings=$.extend(!0,{},default_settings),$.imageMapProDefaultSpotSettings=$.extend(!0,{},default_spot_settings),$.squaresExtendElementDefaults({defaultControls:{font:{text_color:{name:"Text Color",type:"color",default:"#ffffff"}}}}),$.wcpTourCoordinatesForTipForStep=function(step){return 0==step?{x:$("#wcp-editor-toolbar").offset().left,y:$("#wcp-editor-toolbar").offset().top+$("#wcp-editor-toolbar").height()/2}:1==step?{x:$('[data-wcp-main-tab-button-name="Shape"]').offset().left+20,y:$('[data-wcp-main-tab-button-name="Shape"]').offset().top+40}:2==step?{x:$("#wcp-editor-right").offset().left-20,y:$("#wcp-editor-right").offset().top+50}:3==step?{x:$('[data-wcp-form-tab-button-name="icon"]').offset().left+64,y:$('[data-wcp-form-tab-button-name="icon"]').offset().top+28}:4==step?{x:$('[data-wcp-form-tab-button-name="tooltip_content"]').offset().left+64,y:$('[data-wcp-form-tab-button-name="tooltip_content"]').offset().top+28}:5==step?{x:$('[data-wcp-main-tab-button-name="Image Map"]').offset().left+150,y:$('[data-wcp-main-tab-button-name="Image Map"]').offset().top+40}:6==step?{x:$("#wcp-editor-button-preview").offset().left+64,y:$("#wcp-editor-button-preview").offset().top+32}:7==step?{x:$("#wcp-editor-button-load").offset().left+64,y:$("#wcp-editor-button-load").offset().top+32}:8==step?{x:$('[data-wcp-editor-extra-main-button-name="export"]').offset().left+64,y:$('[data-wcp-editor-extra-main-button-name="export"]').offset().top+32}:9==step?{x:$('[data-wcp-editor-extra-main-button-name="code"]').offset().left+64,y:$('[data-wcp-editor-extra-main-button-name="code"]').offset().top+32}:void 0},$.wcpTourCoordinatesForHighlightRect=function(step){return 0==step?{x:$("#wcp-editor-toolbar").offset().left,y:$("#wcp-editor-toolbar").offset().top,width:$("#wcp-editor-toolbar").outerWidth(),height:$("#wcp-editor-toolbar").outerHeight()}:1==step?{x:$('[data-wcp-main-tab-button-name="Shape"]').offset().left,y:$('[data-wcp-main-tab-button-name="Shape"]').offset().top,width:$('[data-wcp-main-tab-button-name="Shape"]').outerWidth(),height:$('[data-wcp-main-tab-button-name="Shape"]').outerHeight()}:2==step?{x:$("#wcp-editor-right").offset().left,y:$("#wcp-editor-right").offset().top,width:$("#wcp-editor-right").outerWidth(),height:$("#wcp-editor-right").outerHeight()}:3==step?{x:$('[data-wcp-form-tab-button-name="icon"]').offset().left,y:$('[data-wcp-form-tab-button-name="icon"]').offset().top,width:$('[data-wcp-form-tab-button-name="icon"]').outerWidth(),height:$('[data-wcp-form-tab-button-name="icon"]').outerHeight()}:4==step?{x:$('[data-wcp-form-tab-button-name="tooltip_content"]').offset().left,y:$('[data-wcp-form-tab-button-name="tooltip_content"]').offset().top,width:$('[data-wcp-form-tab-button-name="tooltip_content"]').outerWidth(),height:$('[data-wcp-form-tab-button-name="tooltip_content"]').outerHeight()}:5==step?{x:$('[data-wcp-main-tab-button-name="Image Map"]').offset().left,y:$('[data-wcp-main-tab-button-name="Image Map"]').offset().top,width:$('[data-wcp-main-tab-button-name="Image Map"]').outerWidth(),height:$('[data-wcp-main-tab-button-name="Image Map"]').outerHeight()}:6==step?{x:$("#wcp-editor-button-preview").offset().left,y:$("#wcp-editor-button-preview").offset().top,width:$("#wcp-editor-button-preview").outerWidth(),height:$("#wcp-editor-button-preview").outerHeight()}:7==step?{x:$("#wcp-editor-button-save").offset().left,y:$("#wcp-editor-button-save").offset().top,width:$("#wcp-editor-button-save").outerWidth()+$("#wcp-editor-button-load").outerWidth(),height:$("#wcp-editor-button-save").outerHeight()}:8==step?{x:$('[data-wcp-editor-extra-main-button-name="import"]').offset().left,y:$('[data-wcp-editor-extra-main-button-name="import"]').offset().top,width:$('[data-wcp-editor-extra-main-button-name="import"]').outerWidth()+$('[data-wcp-editor-extra-main-button-name="export"]').outerWidth(),height:$('[data-wcp-editor-extra-main-button-name="import"]').outerHeight()}:9==step?{x:$('[data-wcp-editor-extra-main-button-name="code"]').offset().left,y:$('[data-wcp-editor-extra-main-button-name="code"]').offset().top,width:$('[data-wcp-editor-extra-main-button-name="code"]').outerWidth(),height:$('[data-wcp-editor-extra-main-button-name="code"]').outerHeight()}:void 0},$.wcpTourEventStarted=function(){tmp_settings=settings,settings=preview_settings,editor.shapesFormSpotIndex=-1,editor.redraw(),$.wcpEditorOpenMainTabWithName("Shape")},$.wcpTourEventFinished=function(){settings=tmp_settings,editor.redraw()},$.wcpEditorGetContentForTabWithName=function(tabName){return"Image Map"==tabName?$.wcpEditorGetHTMLForFormWithName("Image Map Settings"):"Shape"==tabName?$.wcpEditorGetHTMLForFormWithName("Shape Settings"):void 0},$.wcpEditorGetContentForCanvas=function(){return""},$.wcpEditorGetListItems=function(){for(var items=[],i=0;i<settings.spots.length;i++){var s=settings.spots[i];items.push({id:s.id,title:s.id})}return items},$.wcpEditorGetSaves=function(callback){$.imp_editor_storage_get_saves_list(function(savesList){for(var list=new Array,i=0;i<savesList.length;i++){var listItem={name:savesList[i].meta.name,id:savesList[i].id};list.push(listItem)}callback(list)})},$.wcpEditorGetExportJSON=function(){return JSON.stringify(editor.getCompressedSettings())},$.wcpEditorEventFormUpdated=function(formName,controlName){if("Image Map Settings"==formName){var m=$.wcpEditorGetModelOfFormWithName(formName);m.image.image_url&&m.image.image_url.length>0&&settings.general.image_url!==m.image.image_url?(settings.general.image_url=m.image.image_url,editor.canvasImage.src=m.image.image_url,loadImage(editor.canvasImage,function(){$.wcpEditorPresentLoadingScreen("Loading Image...")},function(){editor.canvas_events(),$.wcpEditorHideLoadingScreen(),settings.general.width=editor.canvasImage.naturalWidth,settings.general.height=editor.canvasImage.naturalHeight,$.wcpEditorSetControlValue("Image Map Settings","image_map_width",settings.general.width),$.wcpEditorSetControlValue("Image Map Settings","image_map_height",settings.general.height),$.wcpEditorUpdateForm("Image Map Settings"),editor.redraw(),editor.addAction()},function(){$.wcpEditorHideLoadingScreenWithMessage("Error Loading Image!",!0)})):(settings.general.name=m.general.image_map_name,m.general.image_map_shortcode&&(settings.general.shortcode=m.general.image_map_shortcode.replace(/[\[\]']+/g,"")),settings.general.width=m.general.image_map_width,settings.general.height=m.general.image_map_height,settings.general.responsive=m.general.responsive,settings.general.sticky_tooltips=m.general.sticky_tooltips,settings.general.constrain_tooltips=m.general.constrain_tooltips,settings.general.image_url=m.image.image_url,settings.general.tooltip_animation=m.general.tooltip_animation,settings.general.pageload_animation=m.general.pageload_animation,settings.general.fullscreen_tooltips=m.general.fullscreen_tooltips,settings.general.late_initialization=m.general.late_initialization,editor.redraw(),editor.addAction())}if("Shape Settings"==formName&&editor.selectedSpot!==undefined){var s=editor.selectedSpot,model=$.wcpEditorGetModelOfFormWithName("Shape Settings");s.x=model.general.x,s.y=model.general.y,s.width=model.general.width,s.height=model.general.height,s.actions.mouseover=model.actions.mouseover,s.actions.click=model.actions.click,s.actions.link=model.actions.link,s.actions.open_link_in_new_window=model.actions.open_link_in_new_window,s.default_style.opacity=model.default_style.opacity,s.default_style.icon_fill=model.default_style.icon_fill,s.default_style.border_radius=model.default_style.border_radius,s.default_style.background_color=model.default_style.background_color,s.default_style.background_opacity=model.default_style.background_opacity,s.default_style.border_width=model.default_style.border_width,s.default_style.border_style=model.default_style.border_style,s.default_style.border_color=model.default_style.border_color,s.default_style.border_opacity=model.default_style.border_opacity,s.default_style.fill=model.default_style.fill,s.default_style.fill_opacity=model.default_style.fill_opacity,s.default_style.stroke_color=model.default_style.stroke_color,s.default_style.stroke_opacity=model.default_style.stroke_opacity,s.default_style.stroke_width=model.default_style.stroke_width,s.default_style.stroke_dasharray=model.default_style.stroke_dasharray,s.default_style.stroke_linecap=model.default_style.stroke_linecap,s.default_style.use_icon=model.icon.use_icon,s.default_style.icon_type=model.icon.icon_type,s.default_style.icon_svg_path=model.icon.icon_svg_path,s.default_style.icon_svg_viewbox=model.icon.icon_svg_viewbox,s.default_style.icon_url=model.icon.icon_url,s.default_style.icon_is_pin=model.icon.icon_is_pin,s.default_style.icon_shadow=model.icon.icon_shadow,s.mouseover_style.opacity=model.mouseover_style.mouseover_opacity,s.mouseover_style.icon_fill=model.mouseover_style.mouseover_icon_fill,s.mouseover_style.border_radius=model.mouseover_style.mouseover_border_radius,s.mouseover_style.background_color=model.mouseover_style.mouseover_background_color,s.mouseover_style.background_opacity=model.mouseover_style.mouseover_background_opacity,s.mouseover_style.border_width=model.mouseover_style.mouseover_border_width,s.mouseover_style.border_style=model.mouseover_style.mouseover_border_style,s.mouseover_style.border_color=model.mouseover_style.mouseover_border_color,s.mouseover_style.border_opacity=model.mouseover_style.mouseover_border_opacity,s.mouseover_style.fill=model.mouseover_style.mouseover_fill,s.mouseover_style.fill_opacity=model.mouseover_style.mouseover_fill_opacity,s.mouseover_style.stroke_color=model.mouseover_style.mouseover_stroke_color,s.mouseover_style.stroke_opacity=model.mouseover_style.mouseover_stroke_opacity,s.mouseover_style.stroke_width=model.mouseover_style.mouseover_stroke_width,s.mouseover_style.stroke_dasharray=model.mouseover_style.mouseover_stroke_dasharray,s.mouseover_style.stroke_linecap=model.mouseover_style.mouseover_stroke_linecap,s.tooltip_style.border_radius=model.tooltip_settings.tooltip_border_radius,s.tooltip_style.padding=model.tooltip_settings.tooltip_padding,s.tooltip_style.background_color=model.tooltip_settings.tooltip_background_color,s.tooltip_style.background_opacity=model.tooltip_settings.tooltip_background_opacity,s.tooltip_style.position=model.tooltip_settings.tooltip_position,s.tooltip_style.width=model.tooltip_settings.tooltip_width,s.tooltip_style.auto_width=model.tooltip_settings.tooltip_auto_width,s.tooltip_content.content_type=model.tooltip_content.tooltip_content_type,s.tooltip_content.plain_text=model.tooltip_content.plain_text,s.tooltip_content.plain_text_color=model.tooltip_content.plain_text_color,s.tooltip_content.squares_json=model.tooltip_content.squares_json,s.tooltip_content.squares_content=model.tooltip_content.squares_content,editor.redraw(),sliderDragging||editor.addAction()}},$.wcpEditorEventNewButtonPressed=function(){},$.wcpEditorEventSaveButtonPressed=function(){$.wcpEditorPresentLoadingScreen("Saving..."),$.imp_editor_storage_store_save(editor.getCompressedSettings(),function(progress){progress?$.wcpEditorUpdateLoadingScreenMessage("Saving... "+progress+"%"):$.imp_editor_storage_set_last_save(settings.id,function(){$.wcpEditorHideLoadingScreenWithMessage("Saved!",!1)})})},$.wcpEditorEventLoadButtonPressed=function(){},$.wcpEditorEventUndoButtonPressed=function(){editor.undo()},$.wcpEditorEventRedoButtonPressed=function(){editor.redo()},$.wcpEditorEventPreviewButtonPressed=function(){},$.wcpEditorEventEnteredPreviewMode=function(){settings.editor.previewMode=1,editor.redraw()},$.wcpEditorEventExitedPreviewMode=function(){settings.editor.previewMode=0,editor.redraw()},$.wcpEditorEventListItemMouseover=function(itemID){1==parseInt(settings.editor.previewMode,10)&&$.imageMapProHighlightShape(settings.general.name,itemID)},$.wcpEditorEventListItemSelected=function(itemID){editor.selectSpot(itemID),editor.redraw(),1==parseInt(settings.editor.previewMode,10)&&($.imageMapProHighlightShape(settings.general.name,itemID),"show-tooltip"!=editor.selectedSpot.actions.mouseover&&"show-tooltip"!=editor.selectedSpot.actions.click||$.imageMapProOpenTooltip(settings.general.name,itemID))},$.wcpEditorEventListItemMoved=function(itemID,oldIndex,newIndex){newIndex>settings.spots.length-1&&(newIndex=settings.spots.length-1),settings.spots.splice(newIndex,0,settings.spots.splice(oldIndex,1)[0]);for(var listItems=[],i=0;i<settings.spots.length;i++){var s=settings.spots[i];listItems.push({id:s.id,title:s.id})}$.wcpEditorSetListItems(listItems),$.wcpEditorSelectListItem(settings.editor.selected_shape)},$.wcpEditorEventListItemButtonPressed=function(itemID,buttonName){if("duplicate"==buttonName){var i=editor.getIndexOfSpotWithId(itemID),s=$.extend(!0,{},settings.spots[i]);"spot"==s.type&&(s.id=editor.createIdForSpot()),"rect"==s.type&&(s.id=editor.createIdForRect()),"oval"==s.type&&(s.id=editor.createIdForOval()),"poly"==s.type&&(s.id=editor.createIdForPoly()),settings.spots.push(s),editor.redraw(),editor.addAction()}if("copy"==buttonName){var i=editor.getIndexOfSpotWithId(itemID);copiedStyles={default_style:$.extend(!0,{},settings.spots[i].default_style),mouseover_style:$.extend(!0,{},settings.spots[i].mouseover_style),tooltip_style:$.extend(!0,{},settings.spots[i].tooltip_style),tooltip_content:{plain_text_color:settings.spots[i].tooltip_content.plain_text_color}}}if("paste"==buttonName){var i=editor.getIndexOfSpotWithId(itemID);settings.spots[i].default_style=$.extend(!0,{},copiedStyles.default_style),settings.spots[i].mouseover_style=$.extend(!0,{},copiedStyles.mouseover_style),settings.spots[i].tooltip_style=$.extend(!0,{},copiedStyles.tooltip_style),settings.spots[i].tooltip_content.plain_text_color=copiedStyles.tooltip_content.plain_text_color,editor.redraw(),editor.addAction()}"delete"==buttonName&&(indexOfShapeToDelete=editor.getIndexOfSpotWithId(itemID),$.wcpEditorPresentModal({name:"confirm-delete-shape",title:"Confirm Delete",buttons:[{name:"cancel",title:"Cancel",class:""},{name:"delete",title:"Delete",class:"danger"}],body:"Delete this shape?"}))},$.wcpEditorEventSelectedTool=function(toolName){settings.editor.tool=toolName},$.wcpEditorEventExtraMainButtonClick=function(buttonName){if("code"==buttonName){var html="";html+='<div id="imp-generated-code-wrap">',html+='<div class="generated-code-help">',html+="    This is a sample HTML document, showing how to install the plugin in your website.",html+="</div>",html+="<pre>",html+="&lt;!doctype html&gt;<br>",html+="&lt;html&gt;<br>",html+="&lt;head&gt;<br>",html+='    <strong><span class="em-code">&lt;link rel=&quot;stylesheet&quot; href=&quot;css/image-map-pro.min.css&quot;&gt;</span></strong><br>',html+="&lt;/head&gt;<br>",html+="&lt;body&gt;<br>",html+='    &lt;div id=&quot;<strong><span class="em-code">image-map-pro-container</span></strong>&quot;&gt;&lt;/div&gt;<br><br>',html+="    &lt;script src=&quot;js/jquery.min.js&quot;&gt;&lt;/script&gt;<br>",html+='    <strong><span class="em-code">&lt;script src=&quot;js/image-map-pro.min.js&quot;&gt;&lt;/script&gt;</span></strong><br>',html+="    &lt;script type=&quot;text/javascript&quot;&gt;<br>",html+="        ;(function ($, window, document, undefined) {<br>",html+="            $(document).ready(function() {<br>",html+="</pre>",html+='<div class="generated-code-help">The code that contains all settings and initializes the plugin:</div>',html+='<textarea id="textarea-generated-code" rows="4"></textarea>',html+="    <pre>",html+="            });<br>",html+="        })(jQuery, window, document);<br>",html+="    &lt;/script&gt;<br>",html+="&lt;/body&gt;<br>",html+="&lt;/html&gt;<br>",html+="</pre>",html+="</div>",$.wcpEditorPresentModal({name:"code",title:"Code",buttons:[{name:"done",title:"Done",class:"primary"}],body:html}),$("#textarea-generated-code").val("$('#image-map-pro-container').imageMapPro("+JSON.stringify(editor.getCompressedSettings())+");")}},$.wcpEditorEventModalButtonClicked=function(modalName,buttonName){"create_new"==modalName&&"cancel"==buttonName&&$.wcpEditorCloseModal(),"modal-choose-icon"==modalName&&"cancel"==buttonName&&$.wcpEditorCloseModal(),"load"==modalName&&"cancel"==buttonName&&$.wcpEditorCloseModal(),"confirm-delete-shape"==modalName&&("delete"==buttonName&&(settings.editor.selected_shape==settings.spots[indexOfShapeToDelete].id&&editor.deselectSpot(),settings.spots.splice(indexOfShapeToDelete,1),$.wcpEditorCloseModal(),editor.redraw(),editor.addAction()),"cancel"==buttonName&&$.wcpEditorCloseModal()),"code"==modalName&&"done"==buttonName&&$.wcpEditorCloseModal(),"export"==modalName&&"cancel"==buttonName&&$.wcpEditorCloseModal(),"import"==modalName&&"cancel"==buttonName&&$.wcpEditorCloseModal()},$.wcpEditorEventModalClosed=function(modalName){},$.wcpEditorEventCreatedNewInstance=function(instanceName){settings=$.extend(!0,{},default_settings),settings.id=Math.round(1e4*Math.random())+1,settings.general.name=instanceName,$.wcpEditorPresentLoadingScreen("Creating..."),$.imp_editor_storage_store_save(editor.getCompressedSettings(),function(){$.imp_editor_storage_set_last_save(settings.id,function(){editor.launch(),$.wcpEditorHideLoadingScreenWithMessage("Created!",!1)})})},$.wcpEditorEventLoadSaveWithID=function(saveID){$.wcpEditorPresentLoadingScreen("Loading Image Map..."),$.imp_editor_storage_get_save(saveID,function(save){settings=save,$.imp_editor_storage_set_last_save(settings.id,function(){$.wcpEditorHideLoadingScreen(),editor.launch()})})},$.wcpEditorEventDeleteSaveWithID=function(saveID,cb){$.imp_editor_storage_delete_save(saveID,function(){cb()})},$.wcpEditorEventImportedJSON=function(parsedJSON){var mapName=settings.general.name,mapID=settings.id;settings=$.extend(!0,{},parsedJSON),settings.general.name=mapName,settings.id=mapID,editor.launch()},$.wcpEditorEventHelpButtonPressed=function(){$.wcpTourRestart("Image Map Pro Editor Tour")},$.wcpEditorSliderStartedDragging=function(){sliderDragging=!0},$.wcpEditorSliderFinishedDragging=function(){sliderDragging=!1},$.image_map_pro_default_spot_settings=function(){return default_spot_settings},$.image_map_pro_init_editor=function(initSettings,wcpEditorSettings){editor=new Editor,editor.init(initSettings,wcpEditorSettings)},$.image_map_pro_editor_current_settings=function(){return settings},$.image_map_pro_editor_compressed_settings=function(){return editor.getCompressedSettings()},$.image_map_pro_user_uploaded_image=function(){},Editor.prototype.init=function(initSettings,wcpEditorSettings){var self=this;self.events(),self.loadIconLibrary(),self.wcpEditorSettings=wcpEditorSettings,settings=$.extend(!0,{},default_settings),$.wcpEditorInit(this.wcpEditorSettings),initSettings?(settings=initSettings,self.launch()):$.imp_editor_storage_get_last_save(function(lastSaveID){lastSaveID?($.wcpEditorPresentLoadingScreen("Loading Image Map..."),$.imp_editor_storage_get_save(lastSaveID,function(save){settings=save,editor.launch()})):$.imp_editor_storage_get_saves_list(function(savesList){savesList.length>0?(settings=$.extend(!0,{},default_settings),settings.general.name="Untitled",settings.id=Math.round(1e4*Math.random())+1,self.launch(),$.wcpEditorPresentLoadModal()):(settings=$.extend(!0,{},default_settings),settings.general.name="Untitled",settings.id=Math.round(1e4*Math.random())+1,self.launch())})})},Editor.prototype.launch=function(){var self=this;$.wcpEditorInit(this.wcpEditorSettings),this.selectedSpot=undefined,this.eventSpot=undefined,this.shapesFormSpotIndex=undefined,this.parseSettings(),settings.general.image_url&&settings.general.image_url.length>0?(self.canvasImage.src=settings.general.image_url,loadImage(self.canvasImage,function(){$.wcpEditorPresentLoadingScreen("Loading Image...")},function(){self.canvas_events(),settings.general.width=self.canvasImage.naturalWidth,settings.general.height=self.canvasImage.naturalHeight,self.redraw(),self.selectSpot(settings.editor.selected_shape),$.wcpEditorHideLoadingScreen()},function(){$.wcpEditorHideLoadingScreenWithMessage("Error Loading Image!",!0)})):($.wcpEditorOpenMainTabWithName("Image Map"),$.wcpEditorFormOpenTab("Image Map Settings","image")),this.actionIndex=-1,this.actionStack=new Array,this.addAction(),this.canvas=$("#wcp-editor-canvas"),$.wcpEditorSelectTool(settings.editor.tool),this.updateImageMapForm(),$.wcpTourStart("Image Map Pro Editor Tour")},Editor.prototype.parseSettings=function(){for(var i=0;i<settings.spots.length;i++){var s=settings.spots[i];if(s.x=parseFloat(s.x),s.y=parseFloat(s.y),s.width&&(s.width=parseFloat(s.width)),s.height&&(s.height=parseFloat(s.height)),"poly"==s.type){if(s.points)for(var j=0;j<s.points.length;j++)s.points[j].x=parseFloat(s.points[j].x),s.points[j].y=parseFloat(s.points[j].y);if(s.vs)for(var j=0;j<s.vs.length;j++)for(var k=0;k<s.vs[j].length;k++)s.vs[j][0]=parseFloat(s.vs[j][0]),s.vs[j][1]=parseFloat(s.vs[j][1])}}settings.general.width=parseInt(settings.general.width),settings.general.height=parseInt(settings.general.height);for(var i=0;i<settings.spots.length;i++)if(settings.spots[i]=$.extend(!0,{},default_spot_settings,settings.spots[i]),settings.spots[i].tooltip_content.title||settings.spots[i].tooltip_content.text){var plainText="";settings.spots[i].tooltip_content.title&&(plainText+="<h3>"+settings.spots[i].tooltip_content.title+"</h3>"),settings.spots[i].tooltip_content.text&&(plainText+="<p>"+settings.spots[i].tooltip_content.text+"</p>"),settings.spots[i].tooltip_content.plain_text=plainText,settings.spots[i].tooltip_content={content_type:settings.spots[i].tooltip_content.content_type,plain_text:settings.spots[i].tooltip_content.plain_text,plain_text_color:settings.spots[i].tooltip_content.plain_text_color,squares_json:settings.spots[i].tooltip_content.squares_json,squares_content:settings.spots[i].tooltip_content.squares_content}}settings.general=$.extend(!0,{},default_settings.general,settings.general),settings.editor=$.extend(!0,{},default_settings.editor,settings.editor)},Editor.prototype.redraw=function(){var self=this,canvasBackgroundWidth=$("#wcp-editor-center").width()-80,canvasBackgroundHeight=$("#wcp-editor-center").height()-80;if(settings.general.width>canvasBackgroundWidth||settings.general.height>canvasBackgroundHeight){var imageRatio=settings.general.width/settings.general.height,backgroundRatio=canvasBackgroundWidth/canvasBackgroundHeight;imageRatio<=backgroundRatio?(self.canvasWidth=canvasBackgroundHeight*imageRatio,self.canvasHeight=$("#wcp-editor-center").height()-80):(self.canvasWidth=$("#wcp-editor-center").width()-80,self.canvasHeight=canvasBackgroundWidth/imageRatio)}else self.canvasWidth=settings.general.width,self.canvasHeight=settings.general.height;$("#wcp-editor-canvas").css({width:self.canvasWidth,height:self.canvasHeight}),0==parseInt(settings.editor.previewMode,10)?($("#wcp-editor-canvas").html($.image_map_pro_editor_content()),$("#imp-editor-image").css({width:self.canvasWidth,height:self.canvasHeight}),$.wcpEditorSetPreviewModeOff()):($("#wcp-editor-canvas").imageMapPro(settings),$.wcpEditorSetPreviewModeOn()),self.redrawSpotSelection(),self.updateShapesForm(),this.updateShapesFormState(),self.updateShapesList()},Editor.prototype.redrawSpotSelection=function(){var self=this;if($(".imp-editor-shape").removeClass("selected"),settings.editor.selected_shape!=-1){var i=self.getIndexOfSpotWithId(settings.editor.selected_shape);if(i==undefined)return void(settings.editor.selected_shape=-1);$('.imp-editor-shape[data-id="'+settings.editor.selected_shape+'"]').addClass("selected"),self.selectedSpot=settings.spots[i],"poly"==self.selectedSpot.type&&(self.tempControlPoint=$('.imp-editor-poly[data-id="'+settings.editor.selected_shape+'"]').find(".imp-editor-poly-svg-temp-control-point"),self.tempControlPointLine=$('.imp-editor-poly[data-id="'+settings.editor.selected_shape+'"]').find(".imp-editor-poly-svg-temp-control-point-line"))}else self.selectedSpot=undefined},Editor.prototype.events=function(){var self=this;$(document).off("button-choose-icon-clicked"),$(document).on("button-choose-icon-clicked",function(){$.wcpEditorPresentModal({name:"modal-choose-icon",
title:"Choose Icon",buttons:[{name:"cancel",title:"Cancel",class:"default",id:"imp-editor-button-cancel-choose-icon"}],body:self.iconsHTML})}),$(document).off("button-copy-from-default-styles-clicked"),$(document).on("button-copy-from-default-styles-clicked",function(){self.selectedSpot.mouseover_style.opacity=self.selectedSpot.default_style.opacity,self.selectedSpot.mouseover_style.border_radius=self.selectedSpot.default_style.border_radius,self.selectedSpot.mouseover_style.background_color=self.selectedSpot.default_style.background_color,self.selectedSpot.mouseover_style.background_opacity=self.selectedSpot.default_style.background_opacity,self.selectedSpot.mouseover_style.border_width=self.selectedSpot.default_style.border_width,self.selectedSpot.mouseover_style.border_style=self.selectedSpot.default_style.border_style,self.selectedSpot.mouseover_style.border_color=self.selectedSpot.default_style.border_color,self.selectedSpot.mouseover_style.border_opacity=self.selectedSpot.default_style.border_opacity,self.selectedSpot.mouseover_style.fill=self.selectedSpot.default_style.fill,self.selectedSpot.mouseover_style.fill_opacity=self.selectedSpot.default_style.fill_opacity,self.selectedSpot.mouseover_style.stroke_color=self.selectedSpot.default_style.stroke_color,self.selectedSpot.mouseover_style.stroke_opacity=self.selectedSpot.default_style.stroke_opacity,self.selectedSpot.mouseover_style.stroke_width=self.selectedSpot.default_style.stroke_width,self.selectedSpot.mouseover_style.stroke_dasharray=self.selectedSpot.default_style.stroke_dasharray,self.selectedSpot.mouseover_style.stroke_linecap=self.selectedSpot.default_style.stroke_linecap,self.selectedSpot.mouseover_style.icon_fill=self.selectedSpot.default_style.icon_fill,self.redraw(),self.addAction()}),$(document).off("button-launch-content-builder-clicked"),$(document).on("button-launch-content-builder-clicked",function(){self.launchTooltipContentBuilder()}),$(document).off("click",".imp-spot-icon"),$(document).on("click",".imp-spot-icon",function(){$.wcpEditorCloseModal(),self.selectedSpot.default_style.icon_svg_path=$(this).data("path"),self.selectedSpot.default_style.icon_svg_viewbox=$(this).data("viewbox"),self.redraw(),self.addAction()}),$(document).off("click","#imp-editor-done-editing-tooltip, #imp-editor-tooltip-content-builder-close"),$(document).on("click","#imp-editor-done-editing-tooltip, #imp-editor-tooltip-content-builder-close",function(){$("#imp-editor-tooltip-content-builder-wrap").removeClass("imp-visible"),setTimeout(function(){$("#imp-editor-tooltip-content-builder-wrap").hide()},250),self.doneEditingTooltip(),$.squaresHideEditorWindow()})},Editor.prototype.canvas_events=function(){var self=this;$(window).off("resize.imp-redraw"),$(window).on("resize.imp-redraw",function(){self.redraw()}),$(document).off("mousedown","#wcp-editor-center"),$(document).on("mousedown","#wcp-editor-center",function(e){self.handleMouseDown(e)}),$(document).off("mousemove","#wcp-editor"),$(document).on("mousemove","#wcp-editor",function(e){self.handleMouseMove(e)}),$(document).off("mouseup","#wcp-editor"),$(document).on("mouseup","#wcp-editor",function(e){self.handleMouseUp(e)}),$(document).off("keyup.canvasEvents"),$(document).on("keyup.canvasEvents",function(e){27==e.keyCode&&self.drawingPoly&&(self.drawingPoly=!1,self.startedDrawingPoly=!1,self.mouseDownWhileDrawingPoly=!1,$("#temp-poly").remove())}),$("body").on("contextmenu",function(e){if(self.didDeleteControlPoint)return self.didDeleteControlPoint=!1,!1})},Editor.prototype.addAction=function(){var self=this;self.actionIndex<self.actionStack.length-1&&self.actionStack.splice(self.actionIndex+1,self.actionStack.length),self.actionStack.push($.extend(!0,{},settings)),self.actionIndex++,self.actionStack.length>100&&(self.actionStack.splice(0,1),self.actionIndex--),$("#button-save").html('<span class="glyphicon glyphicon-hdd"></span> Save')},Editor.prototype.undo=function(){var self=this;self.actionIndex>0&&self.actionIndex--,settings=$.extend(!0,{},self.actionStack[self.actionIndex]),self.redraw()},Editor.prototype.redo=function(){var self=this;self.actionIndex<self.actionStack.length-1&&self.actionIndex++,settings=$.extend(!0,{},self.actionStack[self.actionIndex]),self.redraw()},Editor.prototype.loadIconLibrary=function(){for(var html="",i=0;i<$.webcraft_icon_library.length;i++)html+='<div class="imp-spot-icon" data-path="'+$.webcraft_icon_library[i][1]+'" data-viewbox="'+$.webcraft_icon_library[i][0]+'">',html+='   <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="'+$.webcraft_icon_library[i][0]+'" xml:space="preserve" width="40px" height="40px">',html+='       <path style="fill:#000000" d="'+$.webcraft_icon_library[i][1]+'"></path>',html+="   </svg>",html+="</div>";this.iconsHTML=html},Editor.prototype.handleMouseDown=function(e){var self=this;if("wcp-editor-toolbar"!=$(e.target).attr("id")&&1!=$(e.target).closest("#wcp-editor-toolbar").length&&"wcp-editor-extra-main-buttons"!=$(e.target).attr("id")&&1!=$(e.target).closest("#wcp-editor-extra-main-buttons").length&&1!=parseInt(settings.editor.previewMode,10)&&!$("body").hasClass("modal-open")){var point=screenToCanvasSpace(e.pageX,e.pageY,self.canvas);if(self.ix=point.x,self.iy=point.y,self.drawingPoly)return $(e.target).is("circle")&&0==$(e.target).data("index")?(self.drawingPoly=!1,void(self.finishedDrawingPoly=!0)):(self.placePointForTempPoly(self.ix,self.iy),self.redrawTempPoly(),void(self.mouseDownWhileDrawingPoly=!0));if(self.selectedSpot&&"poly"==self.selectedSpot.type&&$(e.target).hasClass("imp-poly-control-point"))return $(e.target).addClass("active"),self.translatedPointIndex=$(e.target).data("index"),2==e.button?(self.selectedSpot.points.splice(self.translatedPointIndex,1),self.updateBoundingBoxForPolygonSpot(self.selectedSpot),self.redraw(),self.addAction(),void(self.didDeleteControlPoint=!0)):(self.translatingControlPoint=!0,self.translatedPointX=self.selectedSpot.points[self.translatedPointIndex].x,self.translatedPointY=self.selectedSpot.points[self.translatedPointIndex].y,self.translatedPoint=$(e.target),void(self.redrawPolygonEl=$(e.target).closest(".imp-editor-shape").find(".imp-editor-poly-svg polygon")));if(self.selectedSpot&&"poly"==self.selectedSpot.type&&$(e.target).hasClass("imp-editor-poly-svg-temp-control-point")){self.selectedSpot.points.splice(self.tempControlPointIndex+1,0,{x:self.controlPointInsertionPointX,y:self.controlPointInsertionPointY}),self.redraw();var point=$('.imp-editor-shape[data-id="'+self.selectedSpot.id+'"]').find('.imp-poly-control-point[data-index="'+(self.tempControlPointIndex+1)+'"]');return point.addClass("active"),self.translatedPointIndex=point.data("index"),self.translatingControlPoint=!0,self.translatedPointX=self.selectedSpot.points[self.translatedPointIndex].x,self.translatedPointY=self.selectedSpot.points[self.translatedPointIndex].y,self.translatedPoint=point,void(self.redrawPolygonEl=point.closest(".imp-editor-shape").find(".imp-editor-poly-svg polygon"))}if($(e.target).hasClass("imp-selection-translate-box")){if(self.startedTransforming=!0,self.transformDirection=$(e.target).data("transform-direction"),self.redrawEl=$(e.target).closest(".imp-editor-shape"),"poly"==self.selectedSpot.type){self.redrawSvgEl=self.redrawEl.find(".imp-editor-poly-svg"),self.redrawPolygonEl=self.redrawSvgEl.find("polygon"),self.polyPoints=new Array;for(var i=0;i<self.selectedSpot.points.length;i++)self.polyPoints.push({x:self.selectedSpot.points[i].x,y:self.selectedSpot.points[i].y})}}else{for(var i=settings.spots.length-1;i>=0;i--)if("poly"==settings.spots[i].type&&self.shouldSelectPoly(settings.spots[i].id))return self.eventSpotId=settings.spots[i].id,void(self.startedSelecting=!0);if(($(e.target).hasClass("imp-editor-shape")||$(e.target).closest(".imp-editor-shape").length>0)&&!$(e.target).hasClass("imp-editor-poly")&&0==$(e.target).closest(".imp-editor-poly").length)return self.eventSpotId=$(e.target).data("id")||$(e.target).closest(".imp-editor-shape").data("id"),void(self.startedSelecting=!0);if(e.pageX>self.canvas.offset().left&&e.pageX<self.canvasWidth+self.canvas.offset().left&&e.pageY>self.canvas.offset().top&&e.pageY<self.canvasHeight+self.canvas.offset().top){if("spot"==settings.editor.tool)return void(self.startedDrawingSpot=!0);if("rect"==settings.editor.tool)return void(self.startedDrawingRect=!0);if("oval"==settings.editor.tool)return void(self.startedDrawingOval=!0);if("poly"==settings.editor.tool)return self.startedDrawingPoly=!0,self.deselectSpot(),self.redraw(),self.polyPoints=new Array,$("#imp-editor-shapes-container").append('<svg id="temp-poly" width="'+self.canvasWidth+'px" height="'+self.canvasHeight+'px" viewBox="0 0 '+self.canvasWidth+" "+self.canvasHeight+'" version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>'),self.placePointForTempPoly(self.ix,self.iy),self.redrawTempPoly(),self.mouseDownWhileDrawingPoly=!0,void(self.drawingPoly=!0)}"wcp-editor-center"==$(e.target).attr("id")&&this.selectedSpot&&(this.shouldDeselectSpot=!0)}}},Editor.prototype.handleMouseMove=function(e){var self=this;if(1!=parseInt(settings.editor.previewMode,10)){var point=screenToCanvasSpace(e.pageX,e.pageY,self.canvas);if(self.x=point.x,self.y=point.y,self.dx=(self.x-self.ix)/self.canvasWidth*100,self.dy=(self.y-self.iy)/self.canvasHeight*100,self.dx=Math.round(10*self.dx)/10,self.dy=Math.round(10*self.dy)/10,self.startedSelecting&&(self.selectSpot(self.eventSpotId),self.redrawEl=$('.imp-editor-shape[data-id="'+self.eventSpotId+'"]'),self.redrawSpotSelection(),self.startedMoving=!0,self.startedSelecting=!1),self.startedMoving){var c=limitToCanvas(self.selectedSpot.x+self.dx,self.selectedSpot.y+self.dy);return"rect"!=self.selectedSpot.type&&"oval"!=self.selectedSpot.type&&"poly"!=self.selectedSpot.type||(c.x+self.selectedSpot.width>100&&(c.x=100-self.selectedSpot.width),c.y+self.selectedSpot.height>100&&(c.y=100-self.selectedSpot.height)),void self.redrawEl.css({left:c.x+"%",top:c.y+"%"})}if(!self.startedTransforming){if(self.startedDrawingRect){var point=screenToCanvasSpace(e.pageX,e.pageY,self.canvas);self.createdDrawingRect||(self.createdDrawingRect=!0,self.eventSpot=self.createRect(),self.eventSpot.x=self.x/self.canvasWidth*100,self.eventSpot.y=self.y/self.canvasHeight*100,self.eventSpot.x=Math.round(10*self.eventSpot.x)/10,self.eventSpot.y=Math.round(10*self.eventSpot.y)/10,self.redraw(),self.redrawEl=$('.imp-editor-shape[data-id="'+self.eventSpot.id+'"]'));var d={x:self.dx,y:self.dy};return self.eventSpot.x+d.x>100&&(d.x=100-self.eventSpot.x),self.eventSpot.y+d.y>100&&(d.y=100-self.eventSpot.y),self.drawRectWidth=d.x,self.drawRectHeight=d.y,void self.redrawEl.css({width:d.x+"%",height:d.y+"%"})}if(self.startedDrawingOval){var point=screenToCanvasSpace(e.pageX,e.pageY,self.canvas);self.createdDrawingOval||(self.createdDrawingOval=!0,self.eventSpot=self.createOval(),self.eventSpot.x=self.x/self.canvasWidth*100,self.eventSpot.y=self.y/self.canvasHeight*100,self.eventSpot.x=Math.round(10*self.eventSpot.x)/10,self.eventSpot.y=Math.round(10*self.eventSpot.y)/10,self.redraw(),self.redrawEl=$('.imp-editor-shape[data-id="'+self.eventSpot.id+'"]'));var d={x:self.dx,y:self.dy};return self.eventSpot.x+d.x>100&&(d.x=100-self.eventSpot.x),self.eventSpot.y+d.y>100&&(d.y=100-self.eventSpot.y),self.drawRectWidth=d.x,self.drawRectHeight=d.y,void self.redrawEl.css({width:d.x+"%",height:d.y+"%"})}if(self.mouseDownWhileDrawingPoly)return self.polyPoints[self.polyPoints.length-1].x=self.x,self.polyPoints[self.polyPoints.length-1].y=self.y,void self.redrawTempPoly();if(self.translatingControlPoint){if(!self.startedTranslatingControlPoint){self.startedTranslatingControlPoint=!0,$(e.target).closest(".imp-editor-shape").find(".imp-selection").hide(),$(e.target).closest(".imp-editor-shape").css({left:0,top:0,width:"100%",height:"100%"}),$(e.target).closest(".imp-editor-shape").find(".imp-editor-poly-svg")[0].setAttribute("viewBox","0 0 "+settings.general.width+" "+settings.general.height);for(var i=0;i<self.selectedSpot.points.length;i++)$('.imp-editor-shape[data-id="'+self.selectedSpot.id+'"]').find('.imp-poly-control-point[data-index="'+i+'"]').css({left:relLocalToRelCanvasSpace(self.selectedSpot.points[i],self.selectedSpot).x+"%",top:relLocalToRelCanvasSpace(self.selectedSpot.points[i],self.selectedSpot).y+"%"})}relLocalToRelCanvasSpace({x:self.translatedPointX,y:self.translatedPointY},self.selectedSpot).x+self.dx<0&&(self.dx=-relLocalToRelCanvasSpace({x:self.translatedPointX,y:self.translatedPointY},self.selectedSpot).x),relLocalToRelCanvasSpace({x:self.translatedPointX,y:self.translatedPointY},self.selectedSpot).x+self.dx>100&&(self.dx=100-relLocalToRelCanvasSpace({x:self.translatedPointX,y:self.translatedPointY},self.selectedSpot).x),relLocalToRelCanvasSpace({x:self.translatedPointX,y:self.translatedPointY},self.selectedSpot).y+self.dy<0&&(self.dy=-relLocalToRelCanvasSpace({x:self.translatedPointX,y:self.translatedPointY},self.selectedSpot).y),relLocalToRelCanvasSpace({x:self.translatedPointX,y:self.translatedPointY},self.selectedSpot).y+self.dy>100&&(self.dy=100-relLocalToRelCanvasSpace({x:self.translatedPointX,y:self.translatedPointY},self.selectedSpot).y);var dx=self.dx/(self.selectedSpot.width/100*self.canvasWidth/self.canvasWidth),dy=self.dy/(self.selectedSpot.height/100*self.canvasHeight/self.canvasHeight);self.selectedSpot.points[self.translatedPointIndex].x=self.translatedPointX+dx,self.selectedSpot.points[self.translatedPointIndex].y=self.translatedPointY+dy,self.translatedPoint.css({left:relLocalToRelCanvasSpace(self.selectedSpot.points[self.translatedPointIndex],self.selectedSpot).x+"%",top:relLocalToRelCanvasSpace(self.selectedSpot.points[self.translatedPointIndex],self.selectedSpot).y+"%"});for(var coords="",j=0;j<self.selectedSpot.points.length;j++){var p=relLocalToRelCanvasSpace(self.selectedSpot.points[j],self.selectedSpot),x=self.selectedSpot.default_style.stroke_width+p.x/100*(settings.general.width-2*self.selectedSpot.default_style.stroke_width),y=self.selectedSpot.default_style.stroke_width+p.y/100*(settings.general.height-2*self.selectedSpot.default_style.stroke_width);coords+=x+","+y+" "}return void self.redrawPolygonEl.attr("points",coords)}return self.selectedSpot&&"poly"==self.selectedSpot.type?void self.redrawSelectedPolyTempPoint():void 0}var c,d;if(1==self.transformDirection&&(c={x:self.selectedSpot.x+self.dx,y:self.selectedSpot.y+self.dy},d={x:self.selectedSpot.width-self.dx,y:self.selectedSpot.height-self.dy}),2==self.transformDirection&&(c={x:self.selectedSpot.x,y:self.selectedSpot.y+self.dy},d={x:self.selectedSpot.width,y:self.selectedSpot.height-self.dy}),3==self.transformDirection&&(c={x:self.selectedSpot.x,y:self.selectedSpot.y+self.dy},d={x:self.selectedSpot.width+self.dx,y:self.selectedSpot.height-self.dy}),4==self.transformDirection&&(c={x:self.selectedSpot.x,y:self.selectedSpot.y},d={x:self.selectedSpot.width+self.dx,y:self.selectedSpot.height}),5==self.transformDirection&&(c={x:self.selectedSpot.x,y:self.selectedSpot.y},d={x:self.selectedSpot.width+self.dx,y:self.selectedSpot.height+self.dy}),6==self.transformDirection&&(c={x:self.selectedSpot.x,y:self.selectedSpot.y},d={x:self.selectedSpot.width,y:self.selectedSpot.height+self.dy}),7==self.transformDirection&&(c={x:self.selectedSpot.x+self.dx,y:self.selectedSpot.y},d={x:self.selectedSpot.width-self.dx,y:self.selectedSpot.height+self.dy}),8==self.transformDirection&&(c={x:self.selectedSpot.x+self.dx,y:self.selectedSpot.y},d={x:self.selectedSpot.width-self.dx,y:self.selectedSpot.height}),c.x<0&&(d.x=self.selectedSpot.x+self.selectedSpot.width,c.x=0),c.y<0&&(c.y=0,d.y=self.selectedSpot.y+self.selectedSpot.height),d.x+c.x>100&&(d.x=100-c.x),d.y+c.y>100&&(d.y=100-c.y),c.x>self.selectedSpot.x+self.selectedSpot.width&&(c.x=self.selectedSpot.x+self.selectedSpot.width),c.y>self.selectedSpot.y+self.selectedSpot.height&&(c.y=self.selectedSpot.y+self.selectedSpot.height),d.x<0&&(d.x=0),d.y<0&&(d.y=0),self.transformX=c.x,self.transformY=c.y,self.transformWidth=d.x,self.transformHeight=d.y,self.redrawEl.css({left:c.x+"%",top:c.y+"%",width:d.x+"%",height:d.y+"%"}),"poly"==self.selectedSpot.type){var shapeWidthPx=settings.general.width*(d.x/100),shapeHeightPx=settings.general.height*(d.y/100);self.redrawSvgEl[0].setAttribute("viewBox","0 0 "+shapeWidthPx+" "+shapeHeightPx);for(var coords="",j=0;j<self.selectedSpot.points.length;j++){var p=self.selectedSpot.points[j],x=self.selectedSpot.default_style.stroke_width+p.x/100*(shapeWidthPx-2*self.selectedSpot.default_style.stroke_width),y=self.selectedSpot.default_style.stroke_width+p.y/100*(shapeHeightPx-2*self.selectedSpot.default_style.stroke_width);coords+=x+","+y+" "}self.redrawPolygonEl.attr("points",coords)}}},Editor.prototype.handleMouseUp=function(e){var self=this;if(1!=parseInt(settings.editor.previewMode,10)){if(self.startedDrawingSpot){var s=self.createSpot();s.x=self.ix/self.canvasWidth*100,s.y=self.iy/self.canvasHeight*100,s.x=Math.round(10*s.x)/10,s.y=Math.round(10*s.y)/10,self.selectSpot(s.id),self.redraw(),self.addAction()}else if(self.startedDrawingRect&&self.createdDrawingRect){var o=limitToCanvas(self.dx,self.dy);self.eventSpot.width=Math.round(10*self.drawRectWidth)/10,self.eventSpot.height=Math.round(10*self.drawRectHeight)/10,self.selectSpot(self.eventSpot.id),self.redraw(),self.addAction()}else if(self.startedDrawingOval&&self.createdDrawingOval){var o=limitToCanvas(self.dx,self.dy);self.eventSpot.width=Math.round(10*self.drawRectWidth)/10,self.eventSpot.height=Math.round(10*self.drawRectHeight)/10,self.selectSpot(self.eventSpot.id),self.redraw(),self.addAction()}else if(self.finishedDrawingPoly){$("#temp-poly").remove();var p=self.createPoly(self.polyPoints);self.selectSpot(p.id),self.addAction(),self.redraw()}else if(self.startedMoving){var o=limitToCanvas(self.selectedSpot.x+self.dx,self.selectedSpot.y+self.dy);"rect"!=self.selectedSpot.type&&"oval"!=self.selectedSpot.type&&"poly"!=self.selectedSpot.type||(o.x+self.selectedSpot.width>100&&(o.x=100-self.selectedSpot.width),o.y+self.selectedSpot.height>100&&(o.y=100-self.selectedSpot.height)),self.selectedSpot.x=Math.round(10*o.x)/10,self.selectedSpot.y=Math.round(10*o.y)/10,self.redraw(),self.addAction()}else if(self.startedTransforming)self.selectedSpot.x=Math.round(10*self.transformX)/10,self.selectedSpot.y=Math.round(10*self.transformY)/10,self.selectedSpot.width=Math.round(10*self.transformWidth)/10,self.selectedSpot.height=Math.round(10*self.transformHeight)/10,self.redraw(),self.addAction();else if(self.translatingControlPoint){self.dx/(self.selectedSpot.width/100*self.canvasWidth/self.canvasWidth),self.dy/(self.selectedSpot.height/100*self.canvasHeight/self.canvasHeight);self.updateBoundingBoxForPolygonSpot(self.selectedSpot),self.redraw(),self.addAction()}else self.startedSelecting?(self.selectedSpot&&self.selectedSpot.id!=self.eventSpotId&&self.deselectSpot(),self.selectSpot(self.eventSpotId),self.redraw(),self.addAction()):self.shouldDeselectSpot&&(self.deselectSpot(),self.redraw(),self.addAction());self.startedSelecting=!1,self.startedMoving=!1,self.startedTransforming=!1,self.transformDirection=0,self.startedDrawingSpot=!1,self.startedDrawingRect=!1,self.createdDrawingRect=!1,self.startedDrawingOval=!1,self.createdDrawingOval=!1,self.startedDrawingPoly=!1,self.finishedDrawingPoly=!1,self.mouseDownWhileDrawingPoly=!1,self.translatingControlPoint=!1,self.startedTranslatingControlPoint=!1,self.shouldDeselectSpot=!1}},Editor.prototype.getIndexOfSpotWithId=function(id){for(var i=0;i<settings.spots.length;i++)if(settings.spots[i].id==id)return i},Editor.prototype.selectSpot=function(id){settings.editor.selected_shape=id},Editor.prototype.deselectSpot=function(){settings.editor.selected_shape=-1},Editor.prototype.createIdForSpot=function(){return"spot-"+Math.floor(9999*Math.random())},Editor.prototype.createIdForRect=function(){return"rect-"+ +Math.floor(9999*Math.random())},Editor.prototype.createIdForOval=function(){return"oval-"+ +Math.floor(9999*Math.random())},Editor.prototype.createIdForPoly=function(){return"poly-"+ +Math.floor(9999*Math.random())},Editor.prototype.createSpot=function(){var self=this,s=$.extend(!0,{},default_spot_settings);return s.type="spot",s.id=self.createIdForSpot(),settings.spots.push(s),s},Editor.prototype.createRect=function(){var self=this,s=$.extend(!0,{},default_spot_settings);return s.type="rect",s.default_style.border_radius=10,s.mouseover_style.border_radius=10,s.id=self.createIdForRect(),settings.spots.push(s),s},Editor.prototype.createOval=function(){var self=this,s=$.extend(!0,{},default_spot_settings);return s.type="oval",s.id=self.createIdForOval(),settings.spots.push(s),s},Editor.prototype.createPoly=function(){var self=this,s=$.extend(!0,{},default_spot_settings);s.type="poly",s.id=self.createIdForPoly();for(var minX=99999,minY=99999,maxX=0,maxY=0,i=0;i<self.polyPoints.length;i++){var p=self.polyPoints[i];p.x<minX&&(minX=p.x),p.x>maxX&&(maxX=p.x),p.y<minY&&(minY=p.y),p.y>maxY&&(maxY=p.y)}var pixelWidth=maxX-minX,pixelHeight=maxY-minY;s.x=minX/self.canvasWidth*100,s.y=minY/self.canvasHeight*100,s.width=pixelWidth/self.canvasWidth*100,s.height=pixelHeight/self.canvasHeight*100;for(var i=0;i<self.polyPoints.length;i++)s.points.push({x:(self.polyPoints[i].x-minX)/pixelWidth*100,y:(self.polyPoints[i].y-minY)/pixelHeight*100});return settings.spots.push(s),s},Editor.prototype.shouldSelectPoly=function(id){for(var s,self=this,i=0;i<settings.spots.length;i++)settings.spots[i].id==id&&(s=settings.spots[i]);var x=self.ix-s.x/100*self.canvasWidth,y=self.iy-s.y/100*self.canvasHeight,spotWidth=s.width/100*self.canvasWidth,spotHeight=s.height/100*self.canvasHeight;x=x/spotWidth*100,y=y/spotHeight*100;for(var testPoly=new Array,i=0;i<s.points.length;i++)testPoly.push([s.points[i].x,s.points[i].y]);return!!isPointInsidePolygon({x:x,y:y},testPoly)},Editor.prototype.placePointForTempPoly=function(x,y){var self=this;self.polyPoints.push({x:x,y:y})},Editor.prototype.redrawTempPoly=function(){for(var self=this,html='<polygon points="',i=0;i<self.polyPoints.length;i++)html+=self.polyPoints[i].x+","+self.polyPoints[i].y+" ";html+='" />';for(var i=0;i<self.polyPoints.length;i++)html+='<circle cx="'+self.polyPoints[i].x+'" cy="'+self.polyPoints[i].y+'" r="4" data-index="'+i+'" />';$("#temp-poly").html(html)},Editor.prototype.redrawSelectedPolyTempPoint=function(){var p,self=this,polygonPixelWidth=self.selectedSpot.width/100*self.canvasWidth,polygonPixelHeight=self.selectedSpot.height/100*self.canvasHeight,xPolygonPixelSpace=self.x-self.selectedSpot.x/100*self.canvasWidth,yPolygonPixelSpace=self.y-self.selectedSpot.y/100*self.canvasHeight,xPolygonPerSpace=xPolygonPixelSpace/polygonPixelWidth*100,yPolygonPerSpace=yPolygonPixelSpace/polygonPixelHeight*100;(p=self.shouldShowTempControlPoint(xPolygonPerSpace,yPolygonPerSpace,self.selectedSpot.points))?(self.tempControlPoint.show(),self.tempControlPointLine.show(),self.tempControlPoint.css({left:p.x+"%",top:p.y+"%"}),self.controlPointInsertionPointX=p.x,self.controlPointInsertionPointY=p.y):(self.tempControlPoint.hide(),self.tempControlPointLine.hide())},Editor.prototype.shouldShowTempControlPoint=function(x,y,points){for(var self=this,p1={x:x,y:y},i=0;i<points.length;i++){var p2={x:points[i].x,y:points[i].y},p3=undefined;p3=points[i+1]?{x:points[i+1].x,y:points[i+1].y}:{x:points[0].x,y:points[0].y};var t=pointLineSegmentParameter([p1.x,p1.y],[p2.x,p2.y],[p3.x,p3.y]),d=distanceFromLineToPoint(p2.x,p2.y,p3.x,p3.y,p1.x,p1.y),x10=p3.x-p2.x,y10=p3.y-p2.y;if(Math.abs(t-.5)<.45&&d<5)return self.tempControlPointIndex=i,{x:p2.x+t*x10,y:p2.y+t*y10}}return!1},Editor.prototype.updateBoundingBoxForPolygonSpot=function(s){for(var minX=99999,minY=99999,maxX=-99999,maxY=-99999,i=0;i<s.points.length;i++){var p=s.points[i];p.x<minX&&(minX=p.x),p.x>maxX&&(maxX=p.x),p.y<minY&&(minY=p.y),p.y>maxY&&(maxY=p.y)}for(var o=relLocalToRelCanvasSpace({x:minX,y:minY},s),o2=relLocalToRelCanvasSpace({x:maxX,y:maxY},s),i=0;i<s.points.length;i++){var p=s.points[i],p1=relLocalToRelCanvasSpace(p,s),p2=relCanvasToRelLocalSpace(p1,{x:o.x,y:o.y,width:o2.x-o.x,height:o2.y-o.y});p.x=p2.x,p.y=p2.y}s.x=o.x,s.y=o.y,s.width=o2.x-o.x,s.height=o2.y-o.y},Editor.prototype.updateShapesList=function(){for(var listItems=[],i=0;i<settings.spots.length;i++){var s=settings.spots[i];listItems.push({id:s.id,title:s.id})}$.wcpEditorSetListItems(listItems),$.wcpEditorSelectListItem(settings.editor.selected_shape)},Editor.prototype.updateShapesForm=function(){var i=this.getIndexOfSpotWithId(settings.editor.selected_shape),s=settings.spots[i];if(s){if($.wcpEditorSetControlValue("Shape Settings","x",s.x),$.wcpEditorSetControlValue("Shape Settings","y",s.y),$.wcpEditorSetControlValue("Shape Settings","width",s.width),$.wcpEditorSetControlValue("Shape Settings","height",s.height),$.wcpEditorSetControlValue("Shape Settings","mouseover",s.actions.mouseover),$.wcpEditorSetControlValue("Shape Settings","click",s.actions.click),$.wcpEditorSetControlValue("Shape Settings","link",s.actions.link),$.wcpEditorSetControlValue("Shape Settings","open_link_in_new_window",s.actions.open_link_in_new_window),$.wcpEditorSetControlValue("Shape Settings","use_icon",s.default_style.use_icon),$.wcpEditorSetControlValue("Shape Settings","icon_type",s.default_style.icon_type),$.wcpEditorSetControlValue("Shape Settings","icon_svg_path",s.default_style.icon_svg_path),$.wcpEditorSetControlValue("Shape Settings","icon_svg_viewbox",s.default_style.icon_svg_viewbox),$.wcpEditorSetControlValue("Shape Settings","icon_url",s.default_style.icon_url),$.wcpEditorSetControlValue("Shape Settings","icon_is_pin",s.default_style.icon_is_pin),$.wcpEditorSetControlValue("Shape Settings","icon_shadow",s.default_style.icon_shadow),$.wcpEditorSetControlValue("Shape Settings","opacity",s.default_style.opacity),$.wcpEditorSetControlValue("Shape Settings","icon_fill",s.default_style.icon_fill),$.wcpEditorSetControlValue("Shape Settings","border_radius",s.default_style.border_radius),$.wcpEditorSetControlValue("Shape Settings","background_color",s.default_style.background_color),$.wcpEditorSetControlValue("Shape Settings","background_opacity",s.default_style.background_opacity),$.wcpEditorSetControlValue("Shape Settings","border_width",s.default_style.border_width),$.wcpEditorSetControlValue("Shape Settings","border_style",s.default_style.border_style),$.wcpEditorSetControlValue("Shape Settings","border_color",s.default_style.border_color),$.wcpEditorSetControlValue("Shape Settings","border_opacity",s.default_style.border_opacity),$.wcpEditorSetControlValue("Shape Settings","fill",s.default_style.fill),$.wcpEditorSetControlValue("Shape Settings","fill_opacity",s.default_style.fill_opacity),$.wcpEditorSetControlValue("Shape Settings","stroke_color",s.default_style.stroke_color),$.wcpEditorSetControlValue("Shape Settings","stroke_opacity",s.default_style.stroke_opacity),$.wcpEditorSetControlValue("Shape Settings","stroke_width",s.default_style.stroke_width),$.wcpEditorSetControlValue("Shape Settings","stroke_dasharray",s.default_style.stroke_dasharray),$.wcpEditorSetControlValue("Shape Settings","stroke_linecap",s.default_style.stroke_linecap),$.wcpEditorSetControlValue("Shape Settings","mouseover_opacity",s.mouseover_style.opacity),$.wcpEditorSetControlValue("Shape Settings","mouseover_icon_fill",s.mouseover_style.icon_fill),$.wcpEditorSetControlValue("Shape Settings","mouseover_border_radius",s.mouseover_style.border_radius),$.wcpEditorSetControlValue("Shape Settings","mouseover_background_color",s.mouseover_style.background_color),$.wcpEditorSetControlValue("Shape Settings","mouseover_background_opacity",s.mouseover_style.background_opacity),$.wcpEditorSetControlValue("Shape Settings","mouseover_border_width",s.mouseover_style.border_width),$.wcpEditorSetControlValue("Shape Settings","mouseover_border_style",s.mouseover_style.border_style),$.wcpEditorSetControlValue("Shape Settings","mouseover_border_color",s.mouseover_style.border_color),$.wcpEditorSetControlValue("Shape Settings","mouseover_border_opacity",s.mouseover_style.border_opacity),$.wcpEditorSetControlValue("Shape Settings","mouseover_fill",s.mouseover_style.fill),$.wcpEditorSetControlValue("Shape Settings","mouseover_fill_opacity",s.mouseover_style.fill_opacity),$.wcpEditorSetControlValue("Shape Settings","mouseover_stroke_color",s.mouseover_style.stroke_color),$.wcpEditorSetControlValue("Shape Settings","mouseover_stroke_opacity",s.mouseover_style.stroke_opacity),$.wcpEditorSetControlValue("Shape Settings","mouseover_stroke_width",s.mouseover_style.stroke_width),$.wcpEditorSetControlValue("Shape Settings","mouseover_stroke_dasharray",s.mouseover_style.stroke_dasharray),$.wcpEditorSetControlValue("Shape Settings","mouseover_stroke_linecap",s.mouseover_style.stroke_linecap),$.wcpEditorSetControlValue("Shape Settings","tooltip_border_radius",s.tooltip_style.border_radius),$.wcpEditorSetControlValue("Shape Settings","tooltip_padding",s.tooltip_style.padding),$.wcpEditorSetControlValue("Shape Settings","tooltip_background_color",s.tooltip_style.background_color),$.wcpEditorSetControlValue("Shape Settings","tooltip_background_opacity",s.tooltip_style.background_opacity),$.wcpEditorSetControlValue("Shape Settings","tooltip_position",s.tooltip_style.position),$.wcpEditorSetControlValue("Shape Settings","tooltip_width",s.tooltip_style.width),$.wcpEditorSetControlValue("Shape Settings","tooltip_auto_width",s.tooltip_style.auto_width),$.wcpEditorSetControlValue("Shape Settings","tooltip_content_type",s.tooltip_content.content_type),$.wcpEditorSetControlValue("Shape Settings","plain_text",s.tooltip_content.plain_text),$.wcpEditorSetControlValue("Shape Settings","squares_json",s.tooltip_content.squares_json),$.wcpEditorSetControlValue("Shape Settings","squares_content",s.tooltip_content.squares_content),i==this.shapesFormSpotIndex)return;this.shapesFormSpotIndex=i;var form=$.wcpEditorGetHTMLForFormWithName("Shape Settings");$.wcpEditorSetContentForTabWithName("Shape",form),$.wcpEditorUpdateForm("Shape Settings"),$.wcpEditorOpenMainTabWithName("Shape"),this.updateShapesFormStateMaster()}else this.shapesFormSpotIndex=-1,$.wcpEditorSetContentForTabWithName("Shape",'<div class="wcp-editor-form-tabs-content-wrap">No shape selected.</div>')},Editor.prototype.updateShapesFormState=function(){var i=this.getIndexOfSpotWithId(settings.editor.selected_shape),s=settings.spots[i];s&&("spot"==s.type&&(1==parseInt(s.default_style.use_icon,10)?($.wcpEditorFormShowControl("Shape Settings","icon_type"),"library"==s.default_style.icon_type&&($.wcpEditorFormHideControl("Shape Settings","icon_url"),$.wcpEditorFormShowControl("Shape Settings","choose_icon_from_library")),"custom"==s.default_style.icon_type&&($.wcpEditorFormShowControl("Shape Settings","icon_url"),$.wcpEditorFormHideControl("Shape Settings","choose_icon_from_library")),$.wcpEditorFormShowControl("Shape Settings","icon_is_pin"),$.wcpEditorFormShowControl("Shape Settings","icon_shadow"),$.wcpEditorFormShowControl("Shape Settings","icon_fill"),$.wcpEditorFormHideControl("Shape Settings","border_radius"),$.wcpEditorFormHideControl("Shape Settings","background_color"),$.wcpEditorFormHideControl("Shape Settings","background_opacity"),$.wcpEditorFormHideControl("Shape Settings","border_width"),$.wcpEditorFormHideControl("Shape Settings","border_style"),$.wcpEditorFormHideControl("Shape Settings","border_color"),$.wcpEditorFormHideControl("Shape Settings","border_opacity"),$.wcpEditorFormShowControl("Shape Settings","mouseover_icon_fill"),$.wcpEditorFormHideControl("Shape Settings","mouseover_border_radius"),$.wcpEditorFormHideControl("Shape Settings","mouseover_background_color"),$.wcpEditorFormHideControl("Shape Settings","mouseover_background_opacity"),$.wcpEditorFormHideControl("Shape Settings","mouseover_border_width"),$.wcpEditorFormHideControl("Shape Settings","mouseover_border_style"),$.wcpEditorFormHideControl("Shape Settings","mouseover_border_color"),
$.wcpEditorFormHideControl("Shape Settings","mouseover_border_opacity")):($.wcpEditorFormHideControl("Shape Settings","choose_icon_from_library"),$.wcpEditorFormHideControl("Shape Settings","icon_type"),$.wcpEditorFormHideControl("Shape Settings","icon_url"),$.wcpEditorFormHideControl("Shape Settings","icon_is_pin"),$.wcpEditorFormHideControl("Shape Settings","icon_shadow"),$.wcpEditorFormHideControl("Shape Settings","icon_fill"),$.wcpEditorFormShowControl("Shape Settings","border_radius"),$.wcpEditorFormShowControl("Shape Settings","background_color"),$.wcpEditorFormShowControl("Shape Settings","background_opacity"),$.wcpEditorFormShowControl("Shape Settings","border_width"),$.wcpEditorFormShowControl("Shape Settings","border_style"),$.wcpEditorFormShowControl("Shape Settings","border_color"),$.wcpEditorFormShowControl("Shape Settings","border_opacity"),$.wcpEditorFormHideControl("Shape Settings","mouseover_icon_fill"),$.wcpEditorFormShowControl("Shape Settings","mouseover_border_radius"),$.wcpEditorFormShowControl("Shape Settings","mouseover_background_color"),$.wcpEditorFormShowControl("Shape Settings","mouseover_background_opacity"),$.wcpEditorFormShowControl("Shape Settings","mouseover_border_width"),$.wcpEditorFormShowControl("Shape Settings","mouseover_border_style"),$.wcpEditorFormShowControl("Shape Settings","mouseover_border_color"),$.wcpEditorFormShowControl("Shape Settings","mouseover_border_opacity"))),"plain-text"==s.tooltip_content.content_type?($.wcpEditorFormShowControl("Shape Settings","plain_text"),$.wcpEditorFormHideControl("Shape Settings","launch_content_builder"),$.wcpEditorFormShowControl("Shape Settings","plain_text_color")):($.wcpEditorFormHideControl("Shape Settings","plain_text"),$.wcpEditorFormShowControl("Shape Settings","launch_content_builder"),$.wcpEditorFormHideControl("Shape Settings","plain_text_color")))},Editor.prototype.updateShapesFormStateMaster=function(){var i=this.getIndexOfSpotWithId(settings.editor.selected_shape),s=settings.spots[i];s&&("spot"==s.type&&($.wcpEditorFormShowControlsGroup("Shape Settings","icon"),$.wcpEditorFormShowControl("Shape Settings","icon_fill"),$.wcpEditorFormShowControl("Shape Settings","mouseover_icon_fill"),$.wcpEditorFormShowControl("Shape Settings","opacity"),$.wcpEditorFormShowControl("Shape Settings","border_radius"),$.wcpEditorFormShowControl("Shape Settings","background_color"),$.wcpEditorFormShowControl("Shape Settings","background_opacity"),$.wcpEditorFormShowControl("Shape Settings","border_width"),$.wcpEditorFormShowControl("Shape Settings","border_style"),$.wcpEditorFormShowControl("Shape Settings","border_color"),$.wcpEditorFormShowControl("Shape Settings","border_opacity"),$.wcpEditorFormShowControl("Shape Settings","mouseover_opacity"),$.wcpEditorFormShowControl("Shape Settings","mouseover_border_radius"),$.wcpEditorFormShowControl("Shape Settings","mouseover_background_color"),$.wcpEditorFormShowControl("Shape Settings","mouseover_background_opacity"),$.wcpEditorFormShowControl("Shape Settings","mouseover_border_width"),$.wcpEditorFormShowControl("Shape Settings","mouseover_border_style"),$.wcpEditorFormShowControl("Shape Settings","mouseover_border_color"),$.wcpEditorFormShowControl("Shape Settings","mouseover_border_opacity"),$.wcpEditorFormHideControl("Shape Settings","fill"),$.wcpEditorFormHideControl("Shape Settings","fill_opacity"),$.wcpEditorFormHideControl("Shape Settings","stroke_color"),$.wcpEditorFormHideControl("Shape Settings","stroke_opacity"),$.wcpEditorFormHideControl("Shape Settings","stroke_width"),$.wcpEditorFormHideControl("Shape Settings","stroke_dasharray"),$.wcpEditorFormHideControl("Shape Settings","stroke_linecap"),$.wcpEditorFormHideControl("Shape Settings","mouseover_fill"),$.wcpEditorFormHideControl("Shape Settings","mouseover_fill_opacity"),$.wcpEditorFormHideControl("Shape Settings","mouseover_stroke_color"),$.wcpEditorFormHideControl("Shape Settings","mouseover_stroke_opacity"),$.wcpEditorFormHideControl("Shape Settings","mouseover_stroke_width"),$.wcpEditorFormHideControl("Shape Settings","mouseover_stroke_dasharray"),$.wcpEditorFormHideControl("Shape Settings","mouseover_stroke_linecap")),"rect"==s.type&&($.wcpEditorFormHideControlsGroup("Shape Settings","icon"),$.wcpEditorFormHideControl("Shape Settings","icon_fill"),$.wcpEditorFormHideControl("Shape Settings","mouseover_icon_fill"),$.wcpEditorFormShowControl("Shape Settings","opacity"),$.wcpEditorFormShowControl("Shape Settings","border_radius"),$.wcpEditorFormShowControl("Shape Settings","background_color"),$.wcpEditorFormShowControl("Shape Settings","background_opacity"),$.wcpEditorFormShowControl("Shape Settings","border_width"),$.wcpEditorFormShowControl("Shape Settings","border_style"),$.wcpEditorFormShowControl("Shape Settings","border_color"),$.wcpEditorFormShowControl("Shape Settings","border_opacity"),$.wcpEditorFormShowControl("Shape Settings","mouseover_opacity"),$.wcpEditorFormShowControl("Shape Settings","mouseover_border_radius"),$.wcpEditorFormShowControl("Shape Settings","mouseover_background_color"),$.wcpEditorFormShowControl("Shape Settings","mouseover_background_opacity"),$.wcpEditorFormShowControl("Shape Settings","mouseover_border_width"),$.wcpEditorFormShowControl("Shape Settings","mouseover_border_style"),$.wcpEditorFormShowControl("Shape Settings","mouseover_border_color"),$.wcpEditorFormShowControl("Shape Settings","mouseover_border_opacity"),$.wcpEditorFormHideControl("Shape Settings","fill"),$.wcpEditorFormHideControl("Shape Settings","fill_opacity"),$.wcpEditorFormHideControl("Shape Settings","stroke_color"),$.wcpEditorFormHideControl("Shape Settings","stroke_opacity"),$.wcpEditorFormHideControl("Shape Settings","stroke_width"),$.wcpEditorFormHideControl("Shape Settings","stroke_dasharray"),$.wcpEditorFormHideControl("Shape Settings","stroke_linecap"),$.wcpEditorFormHideControl("Shape Settings","mouseover_fill"),$.wcpEditorFormHideControl("Shape Settings","mouseover_fill_opacity"),$.wcpEditorFormHideControl("Shape Settings","mouseover_stroke_color"),$.wcpEditorFormHideControl("Shape Settings","mouseover_stroke_opacity"),$.wcpEditorFormHideControl("Shape Settings","mouseover_stroke_width"),$.wcpEditorFormHideControl("Shape Settings","mouseover_stroke_dasharray"),$.wcpEditorFormHideControl("Shape Settings","mouseover_stroke_linecap")),"oval"==s.type&&($.wcpEditorFormHideControlsGroup("Shape Settings","icon"),$.wcpEditorFormHideControl("Shape Settings","icon_fill"),$.wcpEditorFormHideControl("Shape Settings","mouseover_icon_fill"),$.wcpEditorFormShowControl("Shape Settings","opacity"),$.wcpEditorFormShowControl("Shape Settings","border_radius"),$.wcpEditorFormShowControl("Shape Settings","background_color"),$.wcpEditorFormShowControl("Shape Settings","background_opacity"),$.wcpEditorFormShowControl("Shape Settings","border_width"),$.wcpEditorFormShowControl("Shape Settings","border_style"),$.wcpEditorFormShowControl("Shape Settings","border_color"),$.wcpEditorFormShowControl("Shape Settings","border_opacity"),$.wcpEditorFormShowControl("Shape Settings","mouseover_opacity"),$.wcpEditorFormShowControl("Shape Settings","mouseover_border_radius"),$.wcpEditorFormShowControl("Shape Settings","mouseover_background_color"),$.wcpEditorFormShowControl("Shape Settings","mouseover_background_opacity"),$.wcpEditorFormShowControl("Shape Settings","mouseover_border_width"),$.wcpEditorFormShowControl("Shape Settings","mouseover_border_style"),$.wcpEditorFormShowControl("Shape Settings","mouseover_border_color"),$.wcpEditorFormShowControl("Shape Settings","mouseover_border_opacity"),$.wcpEditorFormHideControl("Shape Settings","fill"),$.wcpEditorFormHideControl("Shape Settings","fill_opacity"),$.wcpEditorFormHideControl("Shape Settings","stroke_color"),$.wcpEditorFormHideControl("Shape Settings","stroke_opacity"),$.wcpEditorFormHideControl("Shape Settings","stroke_width"),$.wcpEditorFormHideControl("Shape Settings","stroke_dasharray"),$.wcpEditorFormHideControl("Shape Settings","stroke_linecap"),$.wcpEditorFormHideControl("Shape Settings","mouseover_fill"),$.wcpEditorFormHideControl("Shape Settings","mouseover_fill_opacity"),$.wcpEditorFormHideControl("Shape Settings","mouseover_stroke_color"),$.wcpEditorFormHideControl("Shape Settings","mouseover_stroke_opacity"),$.wcpEditorFormHideControl("Shape Settings","mouseover_stroke_width"),$.wcpEditorFormHideControl("Shape Settings","mouseover_stroke_dasharray"),$.wcpEditorFormHideControl("Shape Settings","mouseover_stroke_linecap")),"poly"==s.type&&($.wcpEditorFormHideControlsGroup("Shape Settings","icon"),$.wcpEditorFormHideControl("Shape Settings","icon_fill"),$.wcpEditorFormHideControl("Shape Settings","mouseover_icon_fill"),$.wcpEditorFormHideControl("Shape Settings","opacity"),$.wcpEditorFormHideControl("Shape Settings","border_radius"),$.wcpEditorFormHideControl("Shape Settings","background_color"),$.wcpEditorFormHideControl("Shape Settings","background_opacity"),$.wcpEditorFormHideControl("Shape Settings","border_width"),$.wcpEditorFormHideControl("Shape Settings","border_style"),$.wcpEditorFormHideControl("Shape Settings","border_color"),$.wcpEditorFormHideControl("Shape Settings","border_opacity"),$.wcpEditorFormHideControl("Shape Settings","mouseover_opacity"),$.wcpEditorFormHideControl("Shape Settings","mouseover_border_radius"),$.wcpEditorFormHideControl("Shape Settings","mouseover_background_color"),$.wcpEditorFormHideControl("Shape Settings","mouseover_background_opacity"),$.wcpEditorFormHideControl("Shape Settings","mouseover_border_width"),$.wcpEditorFormHideControl("Shape Settings","mouseover_border_style"),$.wcpEditorFormHideControl("Shape Settings","mouseover_border_color"),$.wcpEditorFormHideControl("Shape Settings","mouseover_border_opacity"),$.wcpEditorFormShowControl("Shape Settings","fill"),$.wcpEditorFormShowControl("Shape Settings","fill_opacity"),$.wcpEditorFormShowControl("Shape Settings","stroke_color"),$.wcpEditorFormShowControl("Shape Settings","stroke_opacity"),$.wcpEditorFormShowControl("Shape Settings","stroke_width"),$.wcpEditorFormShowControl("Shape Settings","stroke_dasharray"),$.wcpEditorFormShowControl("Shape Settings","stroke_linecap"),$.wcpEditorFormShowControl("Shape Settings","mouseover_fill"),$.wcpEditorFormShowControl("Shape Settings","mouseover_fill_opacity"),$.wcpEditorFormShowControl("Shape Settings","mouseover_stroke_color"),$.wcpEditorFormShowControl("Shape Settings","mouseover_stroke_opacity"),$.wcpEditorFormShowControl("Shape Settings","mouseover_stroke_width"),$.wcpEditorFormShowControl("Shape Settings","mouseover_stroke_dasharray"),$.wcpEditorFormShowControl("Shape Settings","mouseover_stroke_linecap")),$.wcpEditorFormHideControl("Shape Settings","icon_svg_path"),$.wcpEditorFormHideControl("Shape Settings","icon_svg_viewbox"),$.wcpEditorFormHideControl("Shape Settings","squares_json"),$.wcpEditorFormHideControl("Shape Settings","squares_content"))},Editor.prototype.updateImageMapForm=function(){$.wcpEditorSetControlValue("Image Map Settings","image_map_name",settings.general.name),$.wcpEditorSetControlValue("Image Map Settings","image_map_shortcode",settings.general.shortcode),$.wcpEditorSetControlValue("Image Map Settings","image_map_width",settings.general.width),$.wcpEditorSetControlValue("Image Map Settings","image_map_height",settings.general.height),$.wcpEditorSetControlValue("Image Map Settings","responsive",settings.general.responsive),$.wcpEditorSetControlValue("Image Map Settings","sticky_tooltips",settings.general.sticky_tooltips),$.wcpEditorSetControlValue("Image Map Settings","constrain_tooltips",settings.general.constrain_tooltips),$.wcpEditorSetControlValue("Image Map Settings","image_url",settings.general.image_url),$.wcpEditorSetControlValue("Image Map Settings","tooltip_animation",settings.general.tooltip_animation),$.wcpEditorSetControlValue("Image Map Settings","pageload_animation",settings.general.pageload_animation),$.wcpEditorSetControlValue("Image Map Settings","fullscreen_tooltips",settings.general.fullscreen_tooltips),$.wcpEditorSetControlValue("Image Map Settings","late_initialization",settings.general.late_initialization),$.wcpEditorUpdateForm("Image Map Settings")},Editor.prototype.launchTooltipContentBuilder=function(){if(0==$("#imp-editor-tooltip-content-builder-wrap").length){var html="";html+='<div id="imp-editor-tooltip-content-builder-wrap">',html+='   <div id="imp-editor-tooltip-content-builder-background"></div>',html+='   <div id="imp-editor-tooltip-content-builder-close"><i class="fa fa-times" aria-hidden="true"></i></div>',html+='   <div id="imp-editor-tooltip-content-builder-tooltip-wrap" class="squares">',html+='       <div id="imp-editor-tooltip-content-builder" class="squares"></div>',html+="   </div>",html+='   <div id="imp-editor-tooltip-content-builder-description">',html+="       <p>Press the Done button when you are done editing, or click the Close button in the upper-right corner.</p>",html+="   </div>",html+='   <div class="wcp-editor-control-button" id="imp-editor-done-editing-tooltip">Done</div>',html+="</div>",$("body").append(html)}else $("#imp-editor-tooltip-content-builder-wrap").show();setTimeout(function(){$("#imp-editor-tooltip-content-builder-wrap").addClass("imp-visible")},10);var tooltipWidth=this.selectedSpot.tooltip_style.width,tooltipBackgroundRGB=hexToRgb(this.selectedSpot.tooltip_style.background_color),tooltipBackground="rgba("+tooltipBackgroundRGB.r+", "+tooltipBackgroundRGB.g+", "+tooltipBackgroundRGB.b+", "+this.selectedSpot.tooltip_style.background_opacity+")";$("#imp-editor-tooltip-content-builder-tooltip-wrap").css({width:tooltipWidth,background:tooltipBackground}),$.squaresInitWithSettings($("#imp-editor-tooltip-content-builder"),this.selectedSpot.tooltip_content.squares_json),$.squaresShowEditorWindow(20,20)},Editor.prototype.doneEditingTooltip=function(){var json=$.squaresGetCurrentSettings($("#imp-editor-tooltip-content-builder")),html=$.squaresGenerateHTML($("#imp-editor-tooltip-content-builder"));this.selectedSpot.tooltip_content.squares_json=json,this.selectedSpot.tooltip_content.squares_content=html,this.redraw()},Editor.prototype.getCompressedSettings=function(){for(var compressed=$.extend(!0,{},settings),compressedSpots=[],i=0;i<compressed.spots.length;i++)compressedSpots[i]=$.wcpCompress(compressed.spots[i],default_spot_settings),compressedSpots[i].x=Math.round(1e3*compressedSpots[i].x)/1e3,compressedSpots[i].y=Math.round(1e3*compressedSpots[i].y)/1e3,compressedSpots[i].width&&(compressedSpots[i].width=Math.round(1e3*compressedSpots[i].width)/1e3),compressedSpots[i].height&&(compressedSpots[i].height=Math.round(1e3*compressedSpots[i].height)/1e3);return compressed=$.wcpCompress(settings,default_settings),compressed.spots=compressedSpots,compressed}}(jQuery,window,document);